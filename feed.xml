<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><generator uri="https://jekyllrb.com/" version="4.4.1">Jekyll</generator><link href="https://divyanshsinghvi.github.io/feed.xml" rel="self" type="application/atom+xml"/><link href="https://divyanshsinghvi.github.io/" rel="alternate" type="text/html" hreflang="en"/><updated>2025-09-13T12:15:12+00:00</updated><id>https://divyanshsinghvi.github.io/feed.xml</id><title type="html">blank</title><subtitle>Researcher</subtitle><entry><title type="html">Debugging Numeric Comparisons Llms</title><link href="https://divyanshsinghvi.github.io/blog/2025/debugging-numeric-comparisons-llms/" rel="alternate" type="text/html" title="Debugging Numeric Comparisons Llms"/><published>2025-09-12T00:00:00+00:00</published><updated>2025-09-12T00:00:00+00:00</updated><id>https://divyanshsinghvi.github.io/blog/2025/debugging-numeric-comparisons-llms</id><content type="html" xml:base="https://divyanshsinghvi.github.io/blog/2025/debugging-numeric-comparisons-llms/"><![CDATA[ <p>Study on Gemma-2-2B-IT</p> <blockquote> <p><strong>TL;DR:</strong><br/> LLMs <em>internally</em> represents the correct way to compare numbers (80–90% accuracy in penultimate layers) but the <strong>final layer corrupts this knowledge</strong>, causing simple failures like <code class="language-plaintext highlighter-rouge">9.8 &lt; 9.11</code>.</p> </blockquote> <hr/> <h1 id="executive-summary">Executive Summary</h1> <h2 id="the-problem-a-paradox-in-llm-capabilities">The Problem: A paradox in LLM Capabilities</h2> <p>LLMs can ace complex reasoning yet still fail at simple numeric comparisons like 9.8 &lt; 9.11. Using Gemma-2-2B-IT, I ask: <strong>Does the model internally represent the correct Yes/No decision, and if so, where does the failure happen?</strong> This matters because robust numeric comparison is a prerequisite for any downstream task that relies on arithmetic or ordering.</p> <h2 id="high-level-takeaways">High-level takeaways</h2> <p><strong>The representation is good; the output is bad</strong>. Mid/late layers encode a clean Yes/No separation (80–90% forced-choice accuracy using internal signals without any training), but the final layer corrupts it, especially for decimals ⇒ systematic Yes-bias and errors on “No” cases.</p> <p><strong>Length heuristic is real</strong>. <code class="language-plaintext highlighter-rouge">integers_diff_len</code> relies on a direction partially <strong>misaligned</strong> with other numeric sets, consistent with “shortcut” reliance on length. Fastest to learn the correct internal representation to compare the two integers with different length.</p> <p><strong>Last-layer MLP is the culprit</strong>. Causal patching L24→L25 (at mlp_post / resid_post) improves accuracy by a lot; other patches hurt or are neutral.</p> <p><strong>Small, targeted ablations work</strong>. Disabling ~50 harmful neurons at the final block meaningfully improves accuracy—largest gains for integers_equal_len and decimals_diff_len. Even removal of ~10 harmful neurons gave a good boost for accuracy, though lesser than removing 50 harmful neurons.</p> <hr/> <h2 id="key-results">Key Results</h2> <h3 id="1-geometry-shows-the-model-knows-the-answer">1) Geometry shows the model “knows” the answer</h3> <p><strong>What</strong>: PCA on last-layer hidden states per dataset; color by truth. <strong>Finding</strong>: Numeric datasets are cleanly separable; strings aren’t. Decimals show sub-structure that becomes clearer at L-1, where accuracy is higher. <strong>Why it supports the takeaway</strong>: Separation in hidden states despite wrong outputs implies a output projection failure, not a representation failure.</p> <p><img src="/assets/debug-num-llms/pca_scatter_plot_truth.png" alt="graph labeled based on true values: "/></p> <h3 id="2-cross-dataset-axis-alignment-reveals-a-shared-comparator-except-length">2) Cross-dataset axis alignment reveals a shared comparator (except length)</h3> <p><strong>What</strong>: Compute the <strong>Yes–No mean-difference</strong> axis per dataset/layer; compare axes via cosine similarity. <strong>Finding</strong>: Most numeric sets align <strong>strongly</strong> (&gt;0.85), but integers_diff_len is <strong>least aligned</strong> (~0.6), consistent with a <strong>length-based heuristic</strong> distinct from value comparison. <strong>Why</strong>: A shared axis suggests a common <strong>value comparator</strong> subspace; misalignment flags a different (shortcut) mechanism.</p> <div> <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script> <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.1.0.min.js" integrity="sha256-Ei4740bWZhaUTQuD6q9yQlgVCMPBz6CZWhevDYPv93A=" crossorigin="anonymous"></script> <div id="d0ff0010-5024-467f-bd9a-8acac8bbd3b9" class="plotly-graph-div" style="height:100%; width:100%;"></div> <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("d0ff0010-5024-467f-bd9a-8acac8bbd3b9")) {                    Plotly.newPlot(                        "d0ff0010-5024-467f-bd9a-8acac8bbd3b9",                        [{"hovertemplate":"pair=integers_equal_len vs integers_diff_len\u003cbr\u003elayer=%{x}\u003cbr\u003ecosine=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"integers_equal_len vs integers_diff_len","line":{"color":"#636efa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"integers_equal_len vs integers_diff_len","orientation":"v","showlegend":true,"x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"AAAAAAAAAABIipQruV3MP4X021Q+2b8\u002fdVTRd5piyD9va\u002fQPBAPYP4TlTJp3\u002fOA\u002f9efiC4zj4T8UEp+LdH3hP9gMwvlCmuI\u002fuREpjrJP5T+Wznq4hWnmPwEtIw8byOY\u002fPp07bVTq4z+k2VYZvtnjP95mdG3LP+Q\u002f9AZ9Wfdn4z8ERTYZ1zrkPzySLS\u002fA1+Y\u002f6656GORp5j8qmiouAVLlP24eYkwAo+I\u002fHrH9eHTj5D8g9Dp54SzkPzUfyMyDPOM\u002ff3iXrZJ05D89epU5GR\u002fjPzMqqfls5OI\u002f"},"yaxis":"y","type":"scatter"},{"hovertemplate":"pair=integers_equal_len vs decimals_equal_len\u003cbr\u003elayer=%{x}\u003cbr\u003ecosine=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"integers_equal_len vs decimals_equal_len","line":{"color":"#EF553B","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"integers_equal_len vs decimals_equal_len","orientation":"v","showlegend":true,"x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"AAAAAAAAAAD4si6QkeHlP+uzopsoRtA\u002fXMjx+QEM0j9ubh43w3faP8VOcZnkitM\u002f6CRHjGd60j9da9XWylPPPwDMxkyFOtM\u002fOFpzGL1\u002f1j\u002fUUauS1RjcP9BIe3b6Xdw\u002fd\u002flHWRMG5D+i+svZq3ziP477E3j2m+c\u002fvHPfF4Q46D9ttiHX+23qP7jPnlG7hOo\u002fzv97Ep7R6z84GGG2B6zsPzBwffD0Ie0\u002fudf4k8gO7j8zF\u002fU16O3tP5+MzFMfzO0\u002fcrwBdjjI7T9zxA1WXaTtP\u002fa7qJM4lu0\u002f"},"yaxis":"y","type":"scatter"},{"hovertemplate":"pair=integers_equal_len vs decimals_diff_len\u003cbr\u003elayer=%{x}\u003cbr\u003ecosine=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"integers_equal_len vs decimals_diff_len","line":{"color":"#00cc96","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"integers_equal_len vs decimals_diff_len","orientation":"v","showlegend":true,"x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"AAAAAAAAAABUQp998NDgP04G3sHsWNQ\u002f3QkKuai+1D9xx60YndHVP4xIR5kiCNQ\u002fmiK4rgIn1j8v78t4vnfVP8GVGThEi9c\u002f\u002fdmd2jML4D\u002f8my\u002f6v1PhP72bJzqYa+E\u002fa9cSmWyk5D+FqL25WafiPz2MSI4Sf+U\u002fatq8eLCk5T8vsLAX4sPoPxvlY7e+qOk\u002fN0rdNuY56z\u002ffLIM2dkbsP94L8HJEgOw\u002fQIGR00Jz7T\u002fsryk2KFHtPy8JP3aIEe0\u002foeRd85Ul7T\u002fynGI2gafsPw66y1KbSew\u002f"},"yaxis":"y","type":"scatter"},{"hovertemplate":"pair=integers_diff_len vs decimals_equal_len\u003cbr\u003elayer=%{x}\u003cbr\u003ecosine=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"integers_diff_len vs decimals_equal_len","line":{"color":"#ab63fa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"integers_diff_len vs decimals_equal_len","orientation":"v","showlegend":true,"x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"AAAAAAAAAAAEuPPuroCmvwb3kO6efL0\u002fLzaD92lLyT+P0gTR+pzJP7CcB\u002fnjxcQ\u002fMnT3cENrzT8tkOmpzonQPzFH41Sbb88\u002fZow06yPd0D9kgrOPU6HXP0apZU7jqtU\u002fcJ2zDe6e1D+pOcFZuJzSP2IBk03abdQ\u002fGxjDeSaX0j92b5u3OAPZP+WyM6\u002fZW9w\u002f2XHtM6H93T9f+c\u002fTRtHdP1C13LCbYNk\u002f6fcXqyCy4D\u002fJzF\u002f106rfP8f43TD0W90\u002ftce6SuEl4D9IuRt2xXrdP1xfwlKHO9w\u002f"},"yaxis":"y","type":"scatter"},{"hovertemplate":"pair=integers_diff_len vs decimals_diff_len\u003cbr\u003elayer=%{x}\u003cbr\u003ecosine=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"integers_diff_len vs decimals_diff_len","line":{"color":"#FFA15A","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"integers_diff_len vs decimals_diff_len","orientation":"v","showlegend":true,"x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"AAAAAAAAAACLBi5x\u002fdrZP0arbAzhstI\u002fGwwuuEhOxz8L8O6Lp\u002fXRP7gGhHkbU9M\u002fi\u002fvYKIaK2D\u002fin0nSzYXbP+o9TjY35Nw\u002fMBRnKzAp4T8TjZP51iTjPwBX2wxwWeM\u002f1KxWK4AQ4T+I3Jj6EhrgP\u002fo5K3CQ8Nw\u002fejCeGjIK4D9pz216YJrgPzdOyIzKPOM\u002fcpismTPa4j9dKDNNmt3jP7oX4nnEOuI\u002fwGEZjhY45T8XmAz5CrfkP0VFck2WPOQ\u002fPFL2YyGb5T8yVxb5\u002fpnkP+KN7uxaduM\u002f"},"yaxis":"y","type":"scatter"},{"hovertemplate":"pair=decimals_equal_len vs decimals_diff_len\u003cbr\u003elayer=%{x}\u003cbr\u003ecosine=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"decimals_equal_len vs decimals_diff_len","line":{"color":"#19d3f3","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"decimals_equal_len vs decimals_diff_len","orientation":"v","showlegend":true,"x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"AAAAAAAAAAD6S\u002f1uKjvcP77tRR\u002fwyeI\u002fyPJ4OR904z+6Utu44UnlP17xLnidS+c\u002f\u002f74YaAcX6D9yuiEIvuvnP8Z1wZCZN+k\u002fIWMZGNuL5z95WoXQI93oP4056zduFeg\u002fsxNNd7\u002fs6T9w8JX3mRPpP0oG53Fp8eo\u002fK\u002fNRtzne6T+vT4WWGEDsP4q\u002fy5KjSew\u002fblCHk+xj7T+vaQ\u002f2dZ\u002ftP\u002fMevNNls+0\u002f3d5jMjRG7j9rnty11jbuPwcm6LOo9e0\u002fDBfu05n+7T9mxQT2LL\u002ftP4yPZVFqre0\u002f"},"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermap":[{"type":"scattermap","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"layer"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"cosine"}},"legend":{"title":{"text":"pair"},"tracegroupgap":0},"title":{"text":"Layer-wise axis alignment (cosine) between datasets"},"shapes":[{"line":{"color":"green","dash":"dot"},"type":"line","x0":0,"x1":1,"xref":"x domain","y0":1.0,"y1":1.0,"yref":"y"},{"line":{"color":"gray","dash":"dot"},"type":"line","x0":0,"x1":1,"xref":"x domain","y0":0.0,"y1":0.0,"yref":"y"},{"line":{"color":"red","dash":"dot"},"type":"line","x0":0,"x1":1,"xref":"x domain","y0":-1.0,"y1":-1.0,"yref":"y"}]},                        {"responsive": true}                    )                };            </script> </div> <h3 id="3-readout-vs-representation-forced-choice-along-the-unembedding-direction">3) Readout vs representation: forced-choice along the unembedding direction</h3> <p><strong>What</strong>: Project layer activations onto the <strong>Yes–No unembedding direction</strong> and compute forced-choice accuracy per layer. <strong>Finding</strong>: Accuracy is near random until <strong>~L23</strong>, then peaks, then <strong>collapses at L25</strong>, with the strongest failure on decimal “No” cases (systematic <strong>Yes-bias</strong>). <strong>Why</strong>: The <strong>late readout</strong> step (not the earlier representation) drives the error, pinpointing where to intervene.</p> <div> <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script> <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.1.0.min.js" integrity="sha256-Ei4740bWZhaUTQuD6q9yQlgVCMPBz6CZWhevDYPv93A=" crossorigin="anonymous"></script> <div id="85e448e2-5b63-445c-90f2-d3fd8e48c4f7" class="plotly-graph-div" style="height:100%; width:100%;"></div> <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("85e448e2-5b63-445c-90f2-d3fd8e48c4f7")) {                    Plotly.newPlot(                        "85e448e2-5b63-445c-90f2-d3fd8e48c4f7",                        [{"hovertemplate":"pair_type=decimals_diff_len\u003cbr\u003ex=%{x}\u003cbr\u003eforced_acc=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"decimals_diff_len","line":{"color":"#636efa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"decimals_diff_len","orientation":"v","showlegend":true,"x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"sHJoke183z+wcmiR7XzfP7ByaJHtfN8\u002fFK5H4XoU3j+oxks3iUHgP6jGSzeJQeA\u002fqMZLN4lB4D+oxks3iUHgP6jGSzeJQeA\u002fqMZLN4lB4D+oxks3iUHgP6jGSzeJQeA\u002fqMZLN4lB4D+oxks3iUHgP6jGSzeJQeA\u002fqMZLN4lB4D+oxks3iUHgP6jGSzeJQeA\u002fqMZLN4lB4D+oxks3iUHgP6jGSzeJQeA\u002fqMZLN4lB4D+oxks3iUHgP6jGSzeJQeA\u002f6SYxCKwc6j\u002f0\u002fdR46SbpP1CNl24Sg+A\u002f"},"yaxis":"y","type":"scatter"},{"hovertemplate":"pair_type=decimals_equal_len\u003cbr\u003ex=%{x}\u003cbr\u003eforced_acc=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"decimals_equal_len","line":{"color":"#EF553B","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"decimals_equal_len","orientation":"v","showlegend":true,"x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"TDeJQWDl4D9MN4lBYOXgP0w3iUFg5eA\u002fZDvfT42X3j9oke18PzXeP2iR7Xw\u002fNd4\u002faJHtfD813j9oke18PzXeP2iR7Xw\u002fNd4\u002faJHtfD813j9oke18PzXeP2iR7Xw\u002fNd4\u002faJHtfD813j9oke18PzXeP2iR7Xw\u002fNd4\u002faJHtfD813j9oke18PzXeP2iR7Xw\u002fNd4\u002faJHtfD813j9oke18PzXeP2iR7Xw\u002fNd4\u002faJHtfD813j9oke18PzXeP2iR7Xw\u002fNd4\u002fDi2yne+n5j8rhxbZzvfjPxBYObTIdt4\u002f"},"yaxis":"y","type":"scatter"},{"hovertemplate":"pair_type=integers_diff_len\u003cbr\u003ex=%{x}\u003cbr\u003eforced_acc=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"integers_diff_len","line":{"color":"#00cc96","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"integers_diff_len","orientation":"v","showlegend":true,"x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"UrgehetR4D9SuB6F61HgP1K4HoXrUeA\u002fXI\u002fC9Shc3z9cj8L1KFzfP1yPwvUoXN8\u002fXI\u002fC9Shc3z9cj8L1KFzfP1yPwvUoXN8\u002fXI\u002fC9Shc3z9cj8L1KFzfP1yPwvUoXN8\u002fXI\u002fC9Shc3z9cj8L1KFzfP1yPwvUoXN8\u002fXI\u002fC9Shc3z9cj8L1KFzfP1yPwvUoXN8\u002fXI\u002fC9Shc3z9cj8L1KFzfP1yPwvUoXN8\u002fXI\u002fC9Shc3z9cj8L1KFzfP1yPwvUoXN8\u002fDAIrhxbZ7j8UrkfhehTuPyPb+X5qvOQ\u002f"},"yaxis":"y","type":"scatter"},{"hovertemplate":"pair_type=integers_equal_len\u003cbr\u003ex=%{x}\u003cbr\u003eforced_acc=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"integers_equal_len","line":{"color":"#ab63fa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"integers_equal_len","orientation":"v","showlegend":true,"x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"SgwCK4cW4T9KDAIrhxbhP0oMAiuHFuE\u002fbef7qfHS3T9t5\u002fup8dLdP23n+6nx0t0\u002fbef7qfHS3T9t5\u002fup8dLdP23n+6nx0t0\u002fbef7qfHS3T9t5\u002fup8dLdP23n+6nx0t0\u002fbef7qfHS3T9t5\u002fup8dLdP23n+6nx0t0\u002fbef7qfHS3T9t5\u002fup8dLdP23n+6nx0t0\u002fbef7qfHS3T9t5\u002fup8dLdP23n+6nx0t0\u002fbef7qfHS3T9t5\u002fup8dLdP23n+6nx0t0\u002frBxaZDvf7z9YObTIdr7vPyuHFtnO9+M\u002f"},"yaxis":"y","type":"scatter"},{"hovertemplate":"pair_type=ALL\u003cbr\u003ex=%{x}\u003cbr\u003eforced_acc=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"ALL","line":{"color":"#FFA15A","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"ALL","orientation":"v","showlegend":true,"x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"UI2XbhKD4D9QjZduEoPgP1CNl24Sg+A\u002fEFg5tMh23j9g5dAi2\u002fneP2Dl0CLb+d4\u002fYOXQItv53j9g5dAi2\u002fneP2Dl0CLb+d4\u002fYOXQItv53j9g5dAi2\u002fneP2Dl0CLb+d4\u002fYOXQItv53j9g5dAi2\u002fneP2Dl0CLb+d4\u002fYOXQItv53j9g5dAi2\u002fneP2Dl0CLb+d4\u002fYOXQItv53j9g5dAi2\u002fneP2Dl0CLb+d4\u002fYOXQItv53j9g5dAi2\u002fneP2Dl0CLb+d4\u002frBxaZDvf6z8j2\u002fl+arzqP+kmMQisHOI\u002f"},"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermap":[{"type":"scattermap","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"x"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"forced_acc"}},"legend":{"title":{"text":"pair_type"},"tracegroupgap":0},"title":{"text":"Forced-choice accuracy from readout projection (per layer)"}},                        {"responsive": true}                    )                };            </script> </div> <h3 id="4-causal-edits-last-layer-mlp-corrupts-the-decision">4) Causal edits: last-layer MLP corrupts the decision</h3> <p><strong>What</strong>: Activation patching from <strong>L24→L25</strong> at multiple hooks using TransformerLens <a href="#references">Nanda &amp; Bloom, 2022</a>. <strong>Finding</strong>: Patching <code class="language-plaintext highlighter-rouge">mlp_post</code>/<code class="language-plaintext highlighter-rouge">resid_post</code> <strong>improves</strong> accuracy; other patches often hurt. <strong>Why</strong>: This isolates the <strong>final-block MLP</strong> as the primary corruption source.</p> <div> <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script> <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.1.0.min.js" integrity="sha256-Ei4740bWZhaUTQuD6q9yQlgVCMPBz6CZWhevDYPv93A=" crossorigin="anonymous"></script> <div id="329c2747-2b7d-4d48-a24f-92d25d6c2263" class="plotly-graph-div" style="height:100%; width:100%;"></div> <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("329c2747-2b7d-4d48-a24f-92d25d6c2263")) {                    Plotly.newPlot(                        "329c2747-2b7d-4d48-a24f-92d25d6c2263",                        [{"name":"Before","text":{"dtype":"f8","bdata":"ZmZmZmbmTEBmZmZmZuZMQGZmZmZm5kxAZmZmZmbmTEBmZmZmZuZMQA=="},"textposition":"outside","x":["attn_out","resid_mid","resid_post","resid_pre","mlp_post"],"y":{"dtype":"f8","bdata":"exSuR+F64j97FK5H4XriP3sUrkfheuI\u002fexSuR+F64j97FK5H4XriPw=="},"type":"bar"},{"name":"After","text":{"dtype":"f8","bdata":"ZmZmZmYmSkDNzMzMzExIQM3MzMzM7FFAMzMzMzMzSkAAAAAAAKBSQA=="},"textposition":"outside","x":["attn_out","resid_mid","resid_post","resid_pre","mlp_post"],"y":{"dtype":"f8","bdata":"I9v5fmq84D\u002ffT42XbhLfP4ts5\u002fup8eY\u002fYhBYObTI4D\u002fXo3A9CtfnPw=="},"type":"bar"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermap":[{"type":"scattermap","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"yaxis":{"title":{"text":"Accuracy"},"range":[0,1]},"uniformtext":{"minsize":8,"mode":"hide"},"title":{"text":"Accuracy before vs after (L-1 \u2192 L) across hooks"},"barmode":"group","xaxis":{"title":{"text":"hook_name"}},"legend":{"title":{"text":"Condition"}}},                        {"responsive": true}                    )                };            </script> </div> <h3 id="5-targeted-neuron-ablations-repair-failures">5) Targeted neuron ablations repair failures</h3> <p><strong>What</strong>: Rank final-block neurons by <strong>gradient-weighted contribution</strong> to the Yes–No margin; ablate the <strong>top-50</strong> harmful globally and per-dataset. <strong>Finding</strong>: Large gains for <code class="language-plaintext highlighter-rouge">integers_equal_len</code> and <code class="language-plaintext highlighter-rouge">decimals_diff_len</code>; residual asymmetries show the model still attends to decimal length when truth is “No”. <strong>Why</strong>: Confirms that a <strong>small, surgical set</strong> of neurons drive the bias—and that fixing them restores behavior.</p> <div> <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script> <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.1.0.min.js" integrity="sha256-Ei4740bWZhaUTQuD6q9yQlgVCMPBz6CZWhevDYPv93A=" crossorigin="anonymous"></script> <div id="9461aa88-c1d4-4e2d-8380-5f16bf931e05" class="plotly-graph-div" style="height:100%; width:100%;"></div> <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("9461aa88-c1d4-4e2d-8380-5f16bf931e05")) {                    Plotly.newPlot(                        "9461aa88-c1d4-4e2d-8380-5f16bf931e05",                        [{"alignmentgroup":"True","hovertemplate":"Condition=Baseline\u003cbr\u003eslice=%{x}\u003cbr\u003eAccuracy=%{text}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"Baseline","marker":{"color":"#636efa","pattern":{"shape":""}},"name":"Baseline","offsetgroup":"Baseline","orientation":"v","showlegend":true,"text":{"dtype":"f8","bdata":"5dAi2\u002fl+4j+kcD0K16PgPxBYObTIdt4\u002fDi2yne+n5j8xCKwcWmTjPw=="},"textposition":"outside","x":["OVERALL","decimals_diff_len","decimals_equal_len","integers_diff_len","integers_equal_len"],"xaxis":"x","y":{"dtype":"f8","bdata":"5dAi2\u002fl+4j+kcD0K16PgPxBYObTIdt4\u002fDi2yne+n5j8xCKwcWmTjPw=="},"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"Condition=Ablate culprits\u003cbr\u003eslice=%{x}\u003cbr\u003eAccuracy=%{text}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"Ablate culprits","marker":{"color":"#EF553B","pattern":{"shape":""}},"name":"Ablate culprits","offsetgroup":"Ablate culprits","orientation":"v","showlegend":true,"text":{"dtype":"f8","bdata":"LbKd76fG6z89CtejcD3qP7x0kxgEVuY\u002fuB6F61G47j8CK4cW2c7vPw=="},"textposition":"outside","x":["OVERALL","decimals_diff_len","decimals_equal_len","integers_diff_len","integers_equal_len"],"xaxis":"x","y":{"dtype":"f8","bdata":"LbKd76fG6z89CtejcD3qP7x0kxgEVuY\u002fuB6F61G47j8CK4cW2c7vPw=="},"yaxis":"y","type":"bar"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermap":[{"type":"scattermap","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"slice"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"Accuracy"}},"legend":{"title":{"text":"Condition"},"tracegroupgap":0},"title":{"text":"Accuracy by slice: Baseline vs Ablate culprits [50 neurons ablated from mlp layer]"},"barmode":"group"},                        {"responsive": true}                    )                };            </script> </div> <h2 id="bottom-line">Bottom line</h2> <p>Gemma-2-2B-IT internally represent the correct comparator but the last-layer MLP (readout) introduces a Yes-biased corruption. Simple, principled interventions—patching or ablating ~50 neurons—substantially reduce errors, and diagnostics suggest a lingering length heuristic distinct from true value comparison.</p> <hr/> <h2 id="table-of-contents">Table of Contents</h2> <ul> <li><a href="#1-motivation">1. Motivation</a></li> <li><a href="#2-dataset--setup">2. Dataset &amp; Setup</a></li> <li><a href="#3-part-i--geometry--emergence">3. Part I — Geometry &amp; Emergence</a></li> <li><a href="#4-part-ii--readout-vs-representation">4. Part II — Readout vs Representation</a></li> <li><a href="#5-part-iii--causal-edits-patching--ablations">5. Part III — Causal Edits (Patching &amp; Ablations)</a></li> <li><a href="#6-discussion">6. Discussion</a></li> <li><a href="#7-repro-notes">7. Repro Notes</a></li> <li><a href="#8-limitations--next-steps">8. Limitations &amp; Next Steps</a></li> </ul> <hr/> <h2 id="1-motivation">1. Motivation</h2> <p>Large Language Models (LLMs) have demonstrated Olympiad-level performance in complex reasoning, yet they paradoxically stumble on fundamental operations like basic numeric comparisons <code class="language-plaintext highlighter-rouge">9.8 &lt; 9.11</code>. If a model cannot reliably perform basic numeric comparisons, its utility in downstream tasks that depend on such reasoning is severely compromised. This study investigates why a model like Gemma-2-2B-IT fails at these seemingly simple evaluations.</p> <hr/> <h2 id="2-dataset--setup">2. Dataset &amp; Setup</h2> <h3 id="custom-dataset">Custom Dataset</h3> <p>To systematically probe the model’s comparison abilities, a custom dataset was created with 500 samples for each of the following categories. Each prompt followed the format: <code class="language-plaintext highlighter-rouge">Question: Is {a} &gt; {b}? Answer:</code>.</p> <p>The goal was to:</p> <ul> <li>Separate <strong>numeric</strong> from <strong>lexicographic</strong> comparisons.</li> <li>Disentangle <strong>length cues</strong> while doing <strong>value comparison</strong>.</li> <li>Provide a control (strings) for lexicographic comparisons.</li> </ul> <p>Created a custom dataset with 500 samples for each in the format <code class="language-plaintext highlighter-rouge">Question: Is {a} &gt; {b}? Answer:</code></p> <ul> <li><strong>Integers (Equal Length):</strong> <code class="language-plaintext highlighter-rouge">Question: Is 8719 &gt; 9492? Answer:</code></li> <li><strong>Integers(different length)</strong> <code class="language-plaintext highlighter-rouge">Question: Is 526 &gt; 1080? Answer:</code></li> <li><strong>Decimals (equal length, same integer part)</strong> <code class="language-plaintext highlighter-rouge">Question: Is 56.680 &gt; 56.656? Answer:</code></li> <li><strong>Decimals (different length, same integer part)</strong> <code class="language-plaintext highlighter-rouge">Question: Is 37.69 &gt; 37.4? Answer:</code></li> <li><strong>Strings (equal length)</strong> <code class="language-plaintext highlighter-rouge">Question: Is zxqahuuf &gt; takpmzhf? Answer:</code></li> <li><strong>Strings (different length)</strong> <code class="language-plaintext highlighter-rouge">Question: Is iuygoqmivd &gt; xzczm? Answer:</code></li> </ul> <h3 id="forced-choice-output">Forced-Choice Output</h3> <p>To isolate the comparison logic, the model’s output was restricted to only the <strong>“Yes”</strong> and <strong>“No”</strong> tokens. The logits for all other tokens were set to negative infinity, effectively forcing a binary choice and allowing us to analyze the model’s confidence between the two.</p> <h3 id="terminology-and-assumptions">Terminology and Assumptions:</h3> <ul> <li>Layer indexing is starting from 0. Model has total 26 transformer block, will be referred as 0 to 25. I also have used -1 to describe the input embedding for some of the graphs, as the hf library includes the input embedding as the first layer.</li> <li>Integers (Equal Length) =&gt; integers_equal_len; Integers(different length) =&gt; integers_diff_len; Decimals (equal length, same integer part) =&gt; decimals_equal_len; Decimals (different length, same integer part) =&gt; decimals_diff_len</li> <li>Readout : how you turn internal representations into the final prediction; the final mapping that converts that geometry into the emitted token.</li> </ul> <h3 id="baseline-performance">Baseline Performance</h3> <p>The model’s baseline accuracy reveals a significant bias, especially in decimal comparisons.</p> <p>Note: accuracy is specific to that particular bucket of Pair Type and True Answer.</p> <table> <thead> <tr> <th style="text-align: left">Pair Type</th> <th style="text-align: left">True Answer</th> <th style="text-align: left">Count</th> <th style="text-align: left">Accuracy (%)</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><strong>decimals_diff_len</strong></td> <td style="text-align: left">No</td> <td style="text-align: left">246</td> <td style="text-align: left"><strong>15%</strong></td> </tr> <tr> <td style="text-align: left"> </td> <td style="text-align: left">Yes</td> <td style="text-align: left">254</td> <td style="text-align: left">100.0%</td> </tr> <tr> <td style="text-align: left"><strong>decimals_equal_len</strong></td> <td style="text-align: left">No</td> <td style="text-align: left">264</td> <td style="text-align: left"><strong>5%</strong></td> </tr> <tr> <td style="text-align: left"> </td> <td style="text-align: left">Yes</td> <td style="text-align: left">236</td> <td style="text-align: left">100.0%</td> </tr> <tr> <td style="text-align: left"><strong>integers_diff_len</strong></td> <td style="text-align: left">No</td> <td style="text-align: left">255</td> <td style="text-align: left">71.0%</td> </tr> <tr> <td style="text-align: left"> </td> <td style="text-align: left">Yes</td> <td style="text-align: left">245</td> <td style="text-align: left">99.0%</td> </tr> <tr> <td style="text-align: left"><strong>integers_equal_len</strong></td> <td style="text-align: left">No</td> <td style="text-align: left">267</td> <td style="text-align: left">74.0%</td> </tr> <tr> <td style="text-align: left"> </td> <td style="text-align: left">Yes</td> <td style="text-align: left">233</td> <td style="text-align: left">99.0%</td> </tr> <tr> <td style="text-align: left"><strong>string_diff_len</strong></td> <td style="text-align: left">Yes</td> <td style="text-align: left">268</td> <td style="text-align: left"><strong>13.0%</strong></td> </tr> <tr> <td style="text-align: left"> </td> <td style="text-align: left">No</td> <td style="text-align: left">232</td> <td style="text-align: left">85.0%</td> </tr> <tr> <td style="text-align: left"><strong>string_equal_len</strong></td> <td style="text-align: left">Yes</td> <td style="text-align: left">252</td> <td style="text-align: left">27.0%</td> </tr> <tr> <td style="text-align: left"> </td> <td style="text-align: left">No</td> <td style="text-align: left">248</td> <td style="text-align: left">76.0%</td> </tr> </tbody> </table> <p>The most striking result is the near-total failure on decimal comparisons where the correct answer is “No”. The model is overwhelmingly biased towards answering “Yes”. This led to the rejection of my initial hypothesis.</p> <p><strong>Initial Hypothesis (Rejected):</strong> I initially suspected that the model would be behaving more like string comparison for decimals as compared to integers. Reason being, the decimal comparisons are lexicographical if the length of the integer part is same, the examples I took for decimals had same integer part, so they should be compared lexicographically by model and would be more closer towards string comparison, but the model predictions for numeric vs string was totally opposite with more number of Yes for numeric vs more number of No for string. Hence the hypothesis was rejected but gave an insight that model is not getting confused between doing lexicographic comparison in decimals of equal integer part vs treating them as integer number comparisons but biased towards Yes.</p> <h2 id="part-i---geometry--emergence-finding-the-knowledge">Part I - Geometry &amp; Emergence: Finding the Knowledge</h2> <h3 id="31-pca-on-hidden-state-activation">3.1 PCA on hidden state activation</h3> <p><strong>Goal</strong>: Test whether internal geometry separates classes even when final predictions(outputs) are wrong.</p> <p><strong>Methodology</strong> To understand the geometry of internal model’s representation we conducted a PCA on the final layer activations, for each dataset. Visualize the first two PC1 and PC2 which explained roughly &gt;50% variance by <strong>truth</strong> and by <strong>predicted</strong> label.</p> <p><img src="/assets/debug-num-llms/pca_scatter_plot_truth.png" alt="graph labeled based on true values: "/></p> <ul> <li>The class <code class="language-plaintext highlighter-rouge">integers_equal_len</code> and <code class="language-plaintext highlighter-rouge">decimals_equal_len</code> are separable along PC1 cleanly while the others don’t on their PC1.</li> <li><code class="language-plaintext highlighter-rouge">Decimals_diff_len</code> shows a 4 sub cluster instead of 2 and when plotted for last_layer - 1 [layer 24], <code class="language-plaintext highlighter-rouge">decimals_equal_len</code> also started showed that subcluster <img src="/assets/debug-num-llms/pca_scatter_plot_truth_lm2.png" alt="alt text"/></li> <li>Doing PCA on last_layer - 1 where the accuracy was high (shown ahead) had similar separation but larger magnitude in separation. <img src="/assets/debug-num-llms/pca_scatter_plot_string_truth.png" alt="alt text"/></li> <li>There is no clear separation in string comparison, which explains the lack of correlation between how numeric comparison were treated as compared to string. Based on these results I thought of digging deeper into numeric only.</li> </ul> <p><img src="/assets/debug-num-llms/pca_scatter_plot_predicted.png" alt="For graph labeled based on predicted values:"/></p> <ul> <li>Clearly integers has much better predictions and decimals are all Yes predictions, even when the separation is clearly evident.</li> </ul> <h3 id="32-cross-projection-pca">3.2 Cross-Projection PCA</h3> <p><strong>Goal</strong>: See if the model uses a shared mechanism for different numeric types comparison</p> <p><img src="/assets/debug-num-llms/cross_projection_pca.png" alt="alt text"/></p> <p><strong>Methodology</strong></p> <p>PCA was fit on each dataset’s activations. Activations from other datasets were then projected into this learned PCA space. This helps us to ask: <code class="language-plaintext highlighter-rouge">does a separating axis from one dataset also reveal structure in another? Answer is YES</code>.</p> <p>Calculated cosine similarity between <strong>Yes-No mean difference</strong> <a href="#appendix-b">Appendix B</a> axes in source vs target representations.</p> <h3 id="cross-dataset-alignment-cosine-similarity">Cross-dataset alignment (cosine similarity)</h3> <p>Compute Delta_A and Delta_B for two datasets A and B (at the same layer).</p> <p>Cosine similarity of their Yes–No axes</p> <ul> <li>Equivalently: align(A, B) = dot(w_A, w_B) <ul> <li>&gt;0 ⇒ same direction (shared separator)</li> <li>~0 ⇒ orthogonal (unrelated)</li> <li>&lt;0 ⇒ opposite directions</li> </ul> </li> </ul> <p><img src="/assets/debug-num-llms/cosine_similary_between_mean_diff_axes.jpg" alt="alt text"/></p> <p><strong>Result</strong>:</p> <ul> <li><strong>integers_diff_len</strong> is <strong>least aligned</strong> with others (~0.6 cosine) → likely a <strong>length-based heuristic</strong>.</li> <li>Other numeric sets align strongly (<strong>&gt; 0.85</strong>), suggesting a shared value-comparison subspace.</li> </ul> <h3 id="33-cheap-linear-probe-difference-vector">3.3 Cheap linear probe (difference vector)</h3> <p><strong>Goal</strong>: Track where class separation emerges.</p> <p><strong>Methodology</strong> At each layer ℓ, compute unit vector <strong>w</strong> pointing from class “No” mean to “Yes” mean; measure separation Δ = |E[⟨h, w⟩ | Yes] − E[⟨h, w⟩ | No]|.</p> <div> <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script> <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.1.0.min.js" integrity="sha256-Ei4740bWZhaUTQuD6q9yQlgVCMPBz6CZWhevDYPv93A=" crossorigin="anonymous"></script> <div id="66bde88e-9cde-4b08-9774-0f3e434f9f69" class="plotly-graph-div" style="height:100%; width:100%;"></div> <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("66bde88e-9cde-4b08-9774-0f3e434f9f69")) {                    Plotly.newPlot(                        "66bde88e-9cde-4b08-9774-0f3e434f9f69",                        [{"hovertemplate":"pair_type=integers_equal_len\u003cbr\u003elayer=%{x}\u003cbr\u003emargin=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"integers_equal_len","line":{"color":"#636efa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"integers_equal_len","orientation":"v","showlegend":true,"x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"AAAAAAAAAAAAAACAmf6zPwAAAADn9cY\u002fAAAAgA5uzD8AAABAm3DXPwAAAICBuOM\u002fAAAAgAKt5j8AAADAc83kPwAAAMCCsf4\u002fAAAAwMSdBEAAAACAHa8HQAAAACBBzQpAAAAAQCXGGEAAAAAgpIAYQAAAAGDpnidAAAAAIAFKLkAAAABAJDA2QAAAAMChu0FAAAAAID\u002fBQ0AAAADATOtIQAAAAIC86UpAAAAAIJNcUUAAAADgBilTQAAAAICzUlRAAAAA4KvoVkAAAABA1eZYQAAAAGB5UDFA"},"yaxis":"y","type":"scatter"},{"hovertemplate":"pair_type=integers_diff_len\u003cbr\u003elayer=%{x}\u003cbr\u003emargin=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"integers_diff_len","line":{"color":"#EF553B","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"integers_diff_len","orientation":"v","showlegend":true,"x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"AAAAAAAAAAAAAACAYV3qPwAAAEBHQe8\u002fAAAAgPjx8z8AAAAA6KUBQAAAAAAXkBBAAAAA4GmIFEAAAACAJDUSQAAAAGBUuB9AAAAAgBNzJUAAAADAW1spQAAAAGCYWyxAAAAAYA4vM0AAAABANmMzQAAAAMDaBTxAAAAAgO31P0AAAAAACWFCQAAAAKDp60xAAAAAQL19TEAAAACgwD1QQAAAAEA4O1BAAAAAAO22UkAAAACA5shUQAAAAIDaNlZAAAAAIIQZWUAAAABgaihbQAAAAEBgiTFA"},"yaxis":"y","type":"scatter"},{"hovertemplate":"pair_type=decimals_equal_len\u003cbr\u003elayer=%{x}\u003cbr\u003emargin=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"decimals_equal_len","line":{"color":"#00cc96","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"decimals_equal_len","orientation":"v","showlegend":true,"x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"AAAAAAAAAAAAAABgwcW\u002fPwAAAAAJkcw\u002fAAAAwBwq0T8AAACgOKPXPwAAAADZbt8\u002fAAAAgOzi4T8AAABA0vngPwAAAECTWfA\u002fAAAA4Pwg8j8AAADAwSX1PwAAAIAWDPo\u002fAAAAQJTED0AAAACAGREPQAAAAADKuSFAAAAAYEyUJEAAAADgbX4sQAAAAKD0wjZAAAAAQEegOUAAAAAA\u002fS0+QAAAAECa0kBAAAAAgJYQRUAAAABArGlHQAAAAKC7+khAAAAAgDyJS0AAAADApVROQAAAAEBO1CVA"},"yaxis":"y","type":"scatter"},{"hovertemplate":"pair_type=decimals_diff_len\u003cbr\u003elayer=%{x}\u003cbr\u003emargin=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"decimals_diff_len","line":{"color":"#ab63fa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"decimals_diff_len","orientation":"v","showlegend":true,"x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"AAAAAAAAAAAAAADAX5DAPwAAAMCA8Mc\u002fAAAAgKuI0j8AAACAPFTbPwAAAMAo9eM\u002fAAAAQFE15z8AAAAgDhzlPwAAAEDEA\u002fQ\u002fAAAAgEhL+T8AAADgSxUAQAAAAIBDpgJAAAAAIObCEUAAAACAL1URQAAAAEBZsB1AAAAAgNcEIUAAAABgeH4qQAAAAECzRzVAAAAA4FD8N0AAAABAWbU8QAAAAIBU8T5AAAAAAKxpQ0AAAACAaKNFQAAAAOBgxkZAAAAAANyjSUAAAADAcMRLQAAAAKAWEyNA"},"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermap":[{"type":"scattermap","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"layer"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"margin"}},"legend":{"title":{"text":"pair_type"},"tracegroupgap":0},"title":{"text":"Layer-wise class separation (margin along mean-diff axis)"}},                        {"responsive": true}                    )                };            </script> </div> <p><strong>Findings</strong>:</p> <ul> <li><strong>integers_diff_len</strong> were able to start getting separated faster than any other -&gt; <em>likely because it’s easy to do just based on length instead of actually comparing</em></li> <li><strong>integers_equal_len</strong> started getting closer separation to <strong>integers_diff_len</strong> and decimals didn’t jump up as their integers counter part, showing there is definitely some lack of clarity as compared to integers inside LLM.</li> <li><strong>Last Layer Collapse</strong> is a mystery, which drops the final margin suddenly when computed the margin for the last layer as compared to layer before that.</li> </ul> <h3 id="34-dataset-vs-dataset-alignment-of-difference-vector">3.4 Dataset vs Dataset alignment of difference vector</h3> <p><strong>Goal</strong>: See if the model uses a shared mechanism for different numeric types comparisons compared across all layers.</p> <p><strong>Methodology</strong> Check the separation direction is it same for dataset vs dataset</p> <p>Dataset A = integers_diff_len Dataset B = decimals_diff_len At each layer ℓ you get two axes: 𝑤𝐴(ℓ) and 𝑤𝐵(ℓ). You then compute the cosine similarity as above: align(ℓ)(𝐴,𝐵)=⟨𝑤𝐴(ℓ),𝑤𝐵(ℓ)⟩/ ∥𝑤𝐴(ℓ)∥ ∥𝑤𝐵(ℓ)∥⟩</p> <p>This is a number between –1 and 1: ≈ 1 → both datasets separate Yes vs No along the same direction at that layer. ≈ 0 → their separation axes are orthogonal (completely unrelated). ≈ –1 → they’re using opposite directions (what counts as “Yes” for one looks like “No” for the other).</p> <div> <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script> <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.1.0.min.js" integrity="sha256-Ei4740bWZhaUTQuD6q9yQlgVCMPBz6CZWhevDYPv93A=" crossorigin="anonymous"></script> <div id="d0ff0010-5024-467f-bd9a-8acac8bbd3b9" class="plotly-graph-div" style="height:100%; width:100%;"></div> <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("d0ff0010-5024-467f-bd9a-8acac8bbd3b9")) {                    Plotly.newPlot(                        "d0ff0010-5024-467f-bd9a-8acac8bbd3b9",                        [{"hovertemplate":"pair=integers_equal_len vs integers_diff_len\u003cbr\u003elayer=%{x}\u003cbr\u003ecosine=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"integers_equal_len vs integers_diff_len","line":{"color":"#636efa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"integers_equal_len vs integers_diff_len","orientation":"v","showlegend":true,"x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"AAAAAAAAAABIipQruV3MP4X021Q+2b8\u002fdVTRd5piyD9va\u002fQPBAPYP4TlTJp3\u002fOA\u002f9efiC4zj4T8UEp+LdH3hP9gMwvlCmuI\u002fuREpjrJP5T+Wznq4hWnmPwEtIw8byOY\u002fPp07bVTq4z+k2VYZvtnjP95mdG3LP+Q\u002f9AZ9Wfdn4z8ERTYZ1zrkPzySLS\u002fA1+Y\u002f6656GORp5j8qmiouAVLlP24eYkwAo+I\u002fHrH9eHTj5D8g9Dp54SzkPzUfyMyDPOM\u002ff3iXrZJ05D89epU5GR\u002fjPzMqqfls5OI\u002f"},"yaxis":"y","type":"scatter"},{"hovertemplate":"pair=integers_equal_len vs decimals_equal_len\u003cbr\u003elayer=%{x}\u003cbr\u003ecosine=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"integers_equal_len vs decimals_equal_len","line":{"color":"#EF553B","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"integers_equal_len vs decimals_equal_len","orientation":"v","showlegend":true,"x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"AAAAAAAAAAD4si6QkeHlP+uzopsoRtA\u002fXMjx+QEM0j9ubh43w3faP8VOcZnkitM\u002f6CRHjGd60j9da9XWylPPPwDMxkyFOtM\u002fOFpzGL1\u002f1j\u002fUUauS1RjcP9BIe3b6Xdw\u002fd\u002flHWRMG5D+i+svZq3ziP477E3j2m+c\u002fvHPfF4Q46D9ttiHX+23qP7jPnlG7hOo\u002fzv97Ep7R6z84GGG2B6zsPzBwffD0Ie0\u002fudf4k8gO7j8zF\u002fU16O3tP5+MzFMfzO0\u002fcrwBdjjI7T9zxA1WXaTtP\u002fa7qJM4lu0\u002f"},"yaxis":"y","type":"scatter"},{"hovertemplate":"pair=integers_equal_len vs decimals_diff_len\u003cbr\u003elayer=%{x}\u003cbr\u003ecosine=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"integers_equal_len vs decimals_diff_len","line":{"color":"#00cc96","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"integers_equal_len vs decimals_diff_len","orientation":"v","showlegend":true,"x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"AAAAAAAAAABUQp998NDgP04G3sHsWNQ\u002f3QkKuai+1D9xx60YndHVP4xIR5kiCNQ\u002fmiK4rgIn1j8v78t4vnfVP8GVGThEi9c\u002f\u002fdmd2jML4D\u002f8my\u002f6v1PhP72bJzqYa+E\u002fa9cSmWyk5D+FqL25WafiPz2MSI4Sf+U\u002fatq8eLCk5T8vsLAX4sPoPxvlY7e+qOk\u002fN0rdNuY56z\u002ffLIM2dkbsP94L8HJEgOw\u002fQIGR00Jz7T\u002fsryk2KFHtPy8JP3aIEe0\u002foeRd85Ul7T\u002fynGI2gafsPw66y1KbSew\u002f"},"yaxis":"y","type":"scatter"},{"hovertemplate":"pair=integers_diff_len vs decimals_equal_len\u003cbr\u003elayer=%{x}\u003cbr\u003ecosine=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"integers_diff_len vs decimals_equal_len","line":{"color":"#ab63fa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"integers_diff_len vs decimals_equal_len","orientation":"v","showlegend":true,"x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"AAAAAAAAAAAEuPPuroCmvwb3kO6efL0\u002fLzaD92lLyT+P0gTR+pzJP7CcB\u002fnjxcQ\u002fMnT3cENrzT8tkOmpzonQPzFH41Sbb88\u002fZow06yPd0D9kgrOPU6HXP0apZU7jqtU\u002fcJ2zDe6e1D+pOcFZuJzSP2IBk03abdQ\u002fGxjDeSaX0j92b5u3OAPZP+WyM6\u002fZW9w\u002f2XHtM6H93T9f+c\u002fTRtHdP1C13LCbYNk\u002f6fcXqyCy4D\u002fJzF\u002f106rfP8f43TD0W90\u002ftce6SuEl4D9IuRt2xXrdP1xfwlKHO9w\u002f"},"yaxis":"y","type":"scatter"},{"hovertemplate":"pair=integers_diff_len vs decimals_diff_len\u003cbr\u003elayer=%{x}\u003cbr\u003ecosine=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"integers_diff_len vs decimals_diff_len","line":{"color":"#FFA15A","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"integers_diff_len vs decimals_diff_len","orientation":"v","showlegend":true,"x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"AAAAAAAAAACLBi5x\u002fdrZP0arbAzhstI\u002fGwwuuEhOxz8L8O6Lp\u002fXRP7gGhHkbU9M\u002fi\u002fvYKIaK2D\u002fin0nSzYXbP+o9TjY35Nw\u002fMBRnKzAp4T8TjZP51iTjPwBX2wxwWeM\u002f1KxWK4AQ4T+I3Jj6EhrgP\u002fo5K3CQ8Nw\u002fejCeGjIK4D9pz216YJrgPzdOyIzKPOM\u002fcpismTPa4j9dKDNNmt3jP7oX4nnEOuI\u002fwGEZjhY45T8XmAz5CrfkP0VFck2WPOQ\u002fPFL2YyGb5T8yVxb5\u002fpnkP+KN7uxaduM\u002f"},"yaxis":"y","type":"scatter"},{"hovertemplate":"pair=decimals_equal_len vs decimals_diff_len\u003cbr\u003elayer=%{x}\u003cbr\u003ecosine=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"decimals_equal_len vs decimals_diff_len","line":{"color":"#19d3f3","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"decimals_equal_len vs decimals_diff_len","orientation":"v","showlegend":true,"x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"AAAAAAAAAAD6S\u002f1uKjvcP77tRR\u002fwyeI\u002fyPJ4OR904z+6Utu44UnlP17xLnidS+c\u002f\u002f74YaAcX6D9yuiEIvuvnP8Z1wZCZN+k\u002fIWMZGNuL5z95WoXQI93oP4056zduFeg\u002fsxNNd7\u002fs6T9w8JX3mRPpP0oG53Fp8eo\u002fK\u002fNRtzne6T+vT4WWGEDsP4q\u002fy5KjSew\u002fblCHk+xj7T+vaQ\u002f2dZ\u002ftP\u002fMevNNls+0\u002f3d5jMjRG7j9rnty11jbuPwcm6LOo9e0\u002fDBfu05n+7T9mxQT2LL\u002ftP4yPZVFqre0\u002f"},"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermap":[{"type":"scattermap","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"layer"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"cosine"}},"legend":{"title":{"text":"pair"},"tracegroupgap":0},"title":{"text":"Layer-wise axis alignment (cosine) between datasets"},"shapes":[{"line":{"color":"green","dash":"dot"},"type":"line","x0":0,"x1":1,"xref":"x domain","y0":1.0,"y1":1.0,"yref":"y"},{"line":{"color":"gray","dash":"dot"},"type":"line","x0":0,"x1":1,"xref":"x domain","y0":0.0,"y1":0.0,"yref":"y"},{"line":{"color":"red","dash":"dot"},"type":"line","x0":0,"x1":1,"xref":"x domain","y0":-1.0,"y1":-1.0,"yref":"y"}]},                        {"responsive": true}                    )                };            </script> </div> <p><strong>Findings</strong> Clearing in we can see, integers_diff_len has a much lower correlation with other datasets, so model is definitely treating the length comparison separately and rest others in a similar manner with a high correlation of the mean diff vectors.</p> <h3 id="35-trained-logistic-linear-probes-per-layer">3.5 Trained logistic linear probes (per layer)</h3> <p><strong>Goal</strong>: Quantify the linear separability of the representations at each layer</p> <p><strong>Methodology</strong> 5-fold CV logistic regression on per-layer activations; compare training <strong>per dataset</strong> vs <strong>pooled</strong>.</p> <div> <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script> <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.1.0.min.js" integrity="sha256-Ei4740bWZhaUTQuD6q9yQlgVCMPBz6CZWhevDYPv93A=" crossorigin="anonymous"></script> <div id="4a52b892-f8e1-4e4a-a7e3-e3dc46b86958" class="plotly-graph-div" style="height:100%; width:100%;"></div> <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("4a52b892-f8e1-4e4a-a7e3-e3dc46b86958")) {                    Plotly.newPlot(                        "4a52b892-f8e1-4e4a-a7e3-e3dc46b86958",                        [{"line":{"dash":"solid"},"mode":"lines+markers","name":"decimals_diff_len (per-slice)","x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"y":{"dtype":"f8","bdata":"qMZLN4lB4D97FK5H4XrkPxFYObTIduY\u002foBov3SQG6T9CYOXQItvpP42XbhKDwOo\u002fNl66SQwC6z+TGARWDi3qP23n+6nx0u0\u002farx0kxgE7j9dukkMAivvP65H4XoUru8\u002fVg4tsp3v7z8AAAAAAADwPwAAAAAAAPA\u002fVg4tsp3v7z9WDi2yne\u002fvP1YOLbKd7+8\u002frRxaZDvf7z+tHFpkO9\u002fvP60cWmQ73+8\u002frRxaZDvf7z+tHFpkO9\u002fvPwIrhxbZzu8\u002fAiuHFtnO7z8CK4cW2c7vPwIrhxbZzu8\u002f"},"type":"scatter"},{"line":{"dash":"solid"},"mode":"lines+markers","name":"decimals_equal_len (per-slice)","x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"y":{"dtype":"f8","bdata":"TDeJQWDl4D8j2\u002fl+arzkPw8tsp3vp+Y\u002fo3A9Ctej6D8+NV66SQzqP+XQItv5fuo\u002fkML1KFyP6j\u002frUbgehevpP83MzMzMzOw\u002fHoXrUbge7T+zne+nxkvvP60cWmQ73+8\u002fAAAAAAAA8D8AAAAAAADwPwAAAAAAAPA\u002fAAAAAAAA8D8AAAAAAADwPwAAAAAAAPA\u002fAAAAAAAA8D8AAAAAAADwPwAAAAAAAPA\u002fAAAAAAAA8D8AAAAAAADwPwAAAAAAAPA\u002fAAAAAAAA8D8AAAAAAADwPwAAAAAAAPA\u002f"},"type":"scatter"},{"line":{"dash":"solid"},"mode":"lines+markers","name":"integers_diff_len (per-slice)","x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"y":{"dtype":"f8","bdata":"UrgehetR4D9YObTIdr7vP60cWmQ73+8\u002fAAAAAAAA8D8AAAAAAADwPwAAAAAAAPA\u002fAAAAAAAA8D8AAAAAAADwPwAAAAAAAPA\u002fAAAAAAAA8D8AAAAAAADwPwAAAAAAAPA\u002fAAAAAAAA8D8AAAAAAADwPwAAAAAAAPA\u002fAAAAAAAA8D8AAAAAAADwPwAAAAAAAPA\u002fAAAAAAAA8D8AAAAAAADwPwAAAAAAAPA\u002fAAAAAAAA8D8AAAAAAADwPwAAAAAAAPA\u002fAAAAAAAA8D8AAAAAAADwPwAAAAAAAPA\u002f"},"type":"scatter"},{"line":{"dash":"solid"},"mode":"lines+markers","name":"integers_equal_len (per-slice)","x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"y":{"dtype":"f8","bdata":"SgwCK4cW4T85tMh2vp\u002fiP7bz\u002fdR46eY\u002f+n5qvHST6D84iUFg5dDqPyuHFtnO9+s\u002fgGq8dJMY7D8qXI\u002fC9SjsPxWuR+F6FO4\u002fYzvfT42X7j8NAiuHFtnuP61H4XoUru8\u002fAAAAAAAA8D8AAAAAAADwPwAAAAAAAPA\u002fAAAAAAAA8D8AAAAAAADwPwAAAAAAAPA\u002fVg4tsp3v7z9WDi2yne\u002fvP1YOLbKd7+8\u002fVg4tsp3v7z9WDi2yne\u002fvP1YOLbKd7+8\u002frRxaZDvf7z+tHFpkO9\u002fvP1YOLbKd7+8\u002f"},"type":"scatter"},{"line":{"dash":"dash"},"mode":"lines+markers","name":"decimals_diff_len (pooled)","x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"y":{"dtype":"f8","bdata":"q+3FrVNs3z9Kr5KHW6\u002fkPzca6zW5dec\u002fEwQF4aNb6j\u002fNKrjeGlDrPyYry1bSLes\u002fEn2OpFoU7D8YpFDt4KDrP6AYHHhn3e0\u002f9nsDT7iy7j+Tryyw06jvP\u002f4pg0yX7e8\u002fAAAAAAAA8D8AAAAAAADwP+A7TYEd8u8\u002f4DtNgR3y7z\u002fgO02BHfLvP+A7TYEd8u8\u002f4GXQzbTf7z\u002fgZdDNtN\u002fvP+Bl0M203+8\u002f4GXQzbTf7z\u002fgZdDNtN\u002fvP+Bl0M203+8\u002f4GXQzbTf7z\u002fgZdDNtN\u002fvP+Bl0M203+8\u002f"},"type":"scatter"},{"line":{"dash":"dash"},"mode":"lines+markers","name":"decimals_equal_len (pooled)","x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"y":{"dtype":"f8","bdata":"j1tUtaPa4D9yMJuzMNvlP7oIjinnGOg\u002fuBEPAOfs6j9lTavcQaHrPw65JAzcses\u002f5iSCYjRR6z\u002fu4O7COWXqPyvKGsM3Ge0\u002fmP6ViKfH7T9a\u002fY+DNr\u002fvPwAAAAAAAPA\u002fAAAAAAAA8D8AAAAAAADwPwAAAAAAAPA\u002fAAAAAAAA8D8AAAAAAADwPwAAAAAAAPA\u002fAAAAAAAA8D8AAAAAAADwPwAAAAAAAPA\u002fAAAAAAAA8D8AAAAAAADwPwAAAAAAAPA\u002fAAAAAAAA8D8AAAAAAADwPwAAAAAAAPA\u002f"},"type":"scatter"},{"line":{"dash":"dash"},"mode":"lines+markers","name":"integers_diff_len (pooled)","x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"y":{"dtype":"f8","bdata":"y4VbvXlX4D9gtGXDFpvvP5iGMUuzne8\u002fmsKU1t2t7z+awpTW3a3vP21wbmzAre8\u002f\u002fSazQTjP7z+1pPt6\u002f77vPwAAAAAAAPA\u002fOjK9bGXw7z8AAAAAAADwPwAAAAAAAPA\u002fAAAAAAAA8D8AAAAAAADwPwAAAAAAAPA\u002fAAAAAAAA8D8AAAAAAADwPwAAAAAAAPA\u002fAAAAAAAA8D8AAAAAAADwPwAAAAAAAPA\u002fAAAAAAAA8D8AAAAAAADwPwAAAAAAAPA\u002fAAAAAAAA8D8AAAAAAADwPwAAAAAAAPA\u002f"},"type":"scatter"},{"line":{"dash":"dash"},"mode":"lines+markers","name":"integers_equal_len (pooled)","x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"y":{"dtype":"f8","bdata":"ldXyAp8e4T9mn9ekQALjP4P\u002fo\u002fTYQOU\u002fxZzpmDXq5z89JFKxhQTqP\u002fOZbvRuw+s\u002fIBEogWBe7D97gEmpnxXsP7WaeWudWu4\u002fzqejRq0b7z87yDlzwX\u002fvP0qVhR3M0O8\u002fAAAAAAAA8D8AAAAAAADwPwAAAAAAAPA\u002fAAAAAAAA8D8AAAAAAADwPwAAAAAAAPA\u002fAAAAAAAA8D8AAAAAAADwPwAAAAAAAPA\u002fMoVtqC3c7z9DZYepy+3vP0Nlh6nL7e8\u002fQ2WHqcvt7z9DZYepy+3vPzKFbagt3O8\u002f"},"type":"scatter"},{"line":{"dash":"dot","width":3},"mode":"lines+markers","name":"OVERALL (pooled)","x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"y":{"dtype":"f8","bdata":"UI2XbhKD4D\u002fdJAaBlUPnP3WTGARWDuk\u002fMzMzMzMz6z9T46WbxCDsP5DC9Shcj+w\u002f4noUrkfh7D+mm8QgsHLsP1K4HoXrUe4\u002f4noUrkfh7j\u002fufD81XrrvP1YOLbKd7+8\u002fAAAAAAAA8D8AAAAAAADwP5ZDi2zn++8\u002flkOLbOf77z+WQ4ts5\u002fvvP5ZDi2zn++8\u002fK4cW2c737z8rhxbZzvfvPyuHFtnO9+8\u002fVg4tsp3v7z\u002fAyqFFtvPvP8DKoUW28+8\u002fwMqhRbbz7z\u002fAyqFFtvPvP1YOLbKd7+8\u002f"},"type":"scatter"}],                        {"template":{"data":{"barpolar":[{"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scattermap":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermap"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"white","showlakes":true,"showland":true,"subunitcolor":"#C8D4E3"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"white","polar":{"angularaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""},"bgcolor":"white","radialaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"yaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"zaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"baxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"bgcolor":"white","caxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2}}},"title":{"text":"Linear probe accuracy per layer \u2014 pooled vs per-slice"},"xaxis":{"title":{"text":"Layer"}},"yaxis":{"title":{"text":"Accuracy"}},"legend":{"title":{"text":"Curve"}}},                        {"responsive": true}                    )                };            </script> </div> <div> <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script> <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.1.0.min.js" integrity="sha256-Ei4740bWZhaUTQuD6q9yQlgVCMPBz6CZWhevDYPv93A=" crossorigin="anonymous"></script> <div id="c9c3d583-2bb6-4881-8e06-e27d14050992" class="plotly-graph-div" style="height:100%; width:100%;"></div> <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("c9c3d583-2bb6-4881-8e06-e27d14050992")) {                    Plotly.newPlot(                        "c9c3d583-2bb6-4881-8e06-e27d14050992",                        [{"coloraxis":"coloraxis","name":"0","x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"y":["decimals_diff_len","decimals_equal_len","integers_diff_len","integers_equal_len"],"z":{"dtype":"f8","bdata":"UPoZDexrkb+AZ03yHz16P8BEODYQ3p8\u002fMJdePfBXpT+wqCzdgE+nP0DmJBfRU4s\u002fwO1BreUkoT9QuMh0KT2nPwBmYkCc61Q\u002fgPHXcffTlT+ATb34aHSPPwAo8dBowX8\u002fAKrx0k1iYD8AAAAAAAAAAABAiGX9xFu\u002fAFBsAXn+Mz8AUGwBef4zPwBQbAF5\u002fjM\u002fAMBMkl1aDj8AwEySXVoOPwDATJJdWg4\u002fAMBMkl1aDj8AwEySXVoOPwDeOkm322A\u002fAN46SbfbYD8A3jpJt9tgPwDeOkm322A\u002fAHq3aRh5Vb\u002fwVBVKY+yhP7C6vb14D6c\u002fqAiNrn9Isj9wgtEkgk+pP5CCHhAjLqM\u002fwEqMMQc7mD\u002fAwKMNKW2OP4BXf5O9GoM\u002fQC9P1eYdlT\u002fA6Rfo9tuMP4Cp8dJNYnA\u002fAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOQ18+A4Rj8AfEKnArBxv0CFJUoGYoC\u002fgFnPWoqIhL+AWc9aioiEv8DkY+Tkj4S\u002fgIFsJt9jeL\u002fA0hZBIUCAvwAAAAAAAAAAAIybhSY1X78AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJaS4a8vUD9Ay7qDi6CIPzBDnwX+iaq\u002foEYccOQnlb9gn+zd9YuZvwCc9lPyL3q\u002fAKjpGkNzgT8Ar9tFGVZjvwAoe4yiiIE\u002fYI2N2P6DkD\u002fAxdiBXdWUP4DOJlLRW3E\u002fAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKrx0k1iYD8AqvHSTWJgPwCq8dJNYmA\u002fACSJvwlwY78AMJFaiiAtvwAwkVqKIC2\u002fACyRWoogXT8ALJFaiiBdPwAkib8JcGO\u002f","shape":"4, 27"},"type":"heatmap","xaxis":"x","yaxis":"y","hovertemplate":"x: %{x}\u003cbr\u003ey: %{y}\u003cbr\u003ecolor: %{z}\u003cextra\u003e\u003c\u002fextra\u003e"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermap":[{"type":"scattermap","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"scaleanchor":"y","constrain":"domain"},"yaxis":{"anchor":"x","domain":[0.0,1.0],"autorange":"reversed","constrain":"domain"},"coloraxis":{"colorscale":[[0.0,"rgb(103,0,31)"],[0.1,"rgb(178,24,43)"],[0.2,"rgb(214,96,77)"],[0.3,"rgb(244,165,130)"],[0.4,"rgb(253,219,199)"],[0.5,"rgb(247,247,247)"],[0.6,"rgb(209,229,240)"],[0.7,"rgb(146,197,222)"],[0.8,"rgb(67,147,195)"],[0.9,"rgb(33,102,172)"],[1.0,"rgb(5,48,97)"]],"cmin":-0.3,"cmax":0.3,"colorbar":{"title":{"text":"\u0394 acc"}}},"title":{"text":"\u0394 accuracy (pooled \u2212 per-slice) by layer \u00d7 slice"},"shapes":[{"line":{"dash":"dot"},"type":"line","x0":0,"x1":1,"xref":"x domain","y0":-0.5,"y1":-0.5,"yref":"y"}]},                        {"responsive": true}                    )                };            </script> </div> <p><strong>Findings</strong>:</p> <ul> <li>Model started learning to differentiate between <code class="language-plaintext highlighter-rouge">integers_diff_len</code> from <code class="language-plaintext highlighter-rouge">layer 0</code></li> <li>Strong linear separability emerges mid-to-late layers; <strong>Layer 11+</strong> cleanly separates all numeric classes.</li> <li>Tried two methods to train the regression, per dataset separately vs used a pooled dataset and trained on that and Pooled training <strong>helps decimals</strong> (positive deltas) more than it helps integers (slightly negative deltas) → <strong>shared comparator</strong> generalizes best to decimals. Thought the difference is not very high to be significant and hence seemed less interesting to me. But definitely an idea worth exploring.</li> </ul> <h2 id="4-part-ii--readout-vs-representation-finding-the-failure">4. Part II — Readout vs Representation: Finding the Failure</h2> <h3 id="41-unembedding-analysis">4.1 unembedding analysis</h3> <table> <tbody> <tr> <td><strong>Goal</strong>: Project model’s activation onto it’s final output head (model.lm_head.weight). Let <strong>r</strong> = (<code class="language-plaintext highlighter-rouge">W_u[Yes] − W_u[No]</code>) /</td> <td> </td> <td>(<code class="language-plaintext highlighter-rouge">W_u[Yes] − W_u[No]</code>)</td> <td> </td> <td>. We compute two metrics, For each layer’s activations <strong>h</strong>, compute <strong>logit gap</strong> = ⟨h, r⟩ and <strong>forced-choice accuracy</strong> = (sign(gap)) * (+1 if Yes else -1), the classification accuracy obtained by taking the sign of logit gap as the prediction multiplied by 1 if Yes else -1.</td> </tr> </tbody> </table> <p>a. Logit gap: the positive value for the gap indicates bias towards Yes and negative towards No. The magnitude tells how strongly it reflects. b. Forced choice accuracy: “If model were forced to decide Yes vs No using only the activations projected at this layer, how accurate would it be? “</p> <div> <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script> <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.1.0.min.js" integrity="sha256-Ei4740bWZhaUTQuD6q9yQlgVCMPBz6CZWhevDYPv93A=" crossorigin="anonymous"></script> <div id="85e448e2-5b63-445c-90f2-d3fd8e48c4f7" class="plotly-graph-div" style="height:100%; width:100%;"></div> <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("85e448e2-5b63-445c-90f2-d3fd8e48c4f7")) {                    Plotly.newPlot(                        "85e448e2-5b63-445c-90f2-d3fd8e48c4f7",                        [{"hovertemplate":"pair_type=decimals_diff_len\u003cbr\u003ex=%{x}\u003cbr\u003eforced_acc=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"decimals_diff_len","line":{"color":"#636efa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"decimals_diff_len","orientation":"v","showlegend":true,"x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"sHJoke183z+wcmiR7XzfP7ByaJHtfN8\u002fFK5H4XoU3j+oxks3iUHgP6jGSzeJQeA\u002fqMZLN4lB4D+oxks3iUHgP6jGSzeJQeA\u002fqMZLN4lB4D+oxks3iUHgP6jGSzeJQeA\u002fqMZLN4lB4D+oxks3iUHgP6jGSzeJQeA\u002fqMZLN4lB4D+oxks3iUHgP6jGSzeJQeA\u002fqMZLN4lB4D+oxks3iUHgP6jGSzeJQeA\u002fqMZLN4lB4D+oxks3iUHgP6jGSzeJQeA\u002f6SYxCKwc6j\u002f0\u002fdR46SbpP1CNl24Sg+A\u002f"},"yaxis":"y","type":"scatter"},{"hovertemplate":"pair_type=decimals_equal_len\u003cbr\u003ex=%{x}\u003cbr\u003eforced_acc=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"decimals_equal_len","line":{"color":"#EF553B","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"decimals_equal_len","orientation":"v","showlegend":true,"x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"TDeJQWDl4D9MN4lBYOXgP0w3iUFg5eA\u002fZDvfT42X3j9oke18PzXeP2iR7Xw\u002fNd4\u002faJHtfD813j9oke18PzXeP2iR7Xw\u002fNd4\u002faJHtfD813j9oke18PzXeP2iR7Xw\u002fNd4\u002faJHtfD813j9oke18PzXeP2iR7Xw\u002fNd4\u002faJHtfD813j9oke18PzXeP2iR7Xw\u002fNd4\u002faJHtfD813j9oke18PzXeP2iR7Xw\u002fNd4\u002faJHtfD813j9oke18PzXeP2iR7Xw\u002fNd4\u002fDi2yne+n5j8rhxbZzvfjPxBYObTIdt4\u002f"},"yaxis":"y","type":"scatter"},{"hovertemplate":"pair_type=integers_diff_len\u003cbr\u003ex=%{x}\u003cbr\u003eforced_acc=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"integers_diff_len","line":{"color":"#00cc96","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"integers_diff_len","orientation":"v","showlegend":true,"x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"UrgehetR4D9SuB6F61HgP1K4HoXrUeA\u002fXI\u002fC9Shc3z9cj8L1KFzfP1yPwvUoXN8\u002fXI\u002fC9Shc3z9cj8L1KFzfP1yPwvUoXN8\u002fXI\u002fC9Shc3z9cj8L1KFzfP1yPwvUoXN8\u002fXI\u002fC9Shc3z9cj8L1KFzfP1yPwvUoXN8\u002fXI\u002fC9Shc3z9cj8L1KFzfP1yPwvUoXN8\u002fXI\u002fC9Shc3z9cj8L1KFzfP1yPwvUoXN8\u002fXI\u002fC9Shc3z9cj8L1KFzfP1yPwvUoXN8\u002fDAIrhxbZ7j8UrkfhehTuPyPb+X5qvOQ\u002f"},"yaxis":"y","type":"scatter"},{"hovertemplate":"pair_type=integers_equal_len\u003cbr\u003ex=%{x}\u003cbr\u003eforced_acc=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"integers_equal_len","line":{"color":"#ab63fa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"integers_equal_len","orientation":"v","showlegend":true,"x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"SgwCK4cW4T9KDAIrhxbhP0oMAiuHFuE\u002fbef7qfHS3T9t5\u002fup8dLdP23n+6nx0t0\u002fbef7qfHS3T9t5\u002fup8dLdP23n+6nx0t0\u002fbef7qfHS3T9t5\u002fup8dLdP23n+6nx0t0\u002fbef7qfHS3T9t5\u002fup8dLdP23n+6nx0t0\u002fbef7qfHS3T9t5\u002fup8dLdP23n+6nx0t0\u002fbef7qfHS3T9t5\u002fup8dLdP23n+6nx0t0\u002fbef7qfHS3T9t5\u002fup8dLdP23n+6nx0t0\u002frBxaZDvf7z9YObTIdr7vPyuHFtnO9+M\u002f"},"yaxis":"y","type":"scatter"},{"hovertemplate":"pair_type=ALL\u003cbr\u003ex=%{x}\u003cbr\u003eforced_acc=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"ALL","line":{"color":"#FFA15A","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"ALL","orientation":"v","showlegend":true,"x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"UI2XbhKD4D9QjZduEoPgP1CNl24Sg+A\u002fEFg5tMh23j9g5dAi2\u002fneP2Dl0CLb+d4\u002fYOXQItv53j9g5dAi2\u002fneP2Dl0CLb+d4\u002fYOXQItv53j9g5dAi2\u002fneP2Dl0CLb+d4\u002fYOXQItv53j9g5dAi2\u002fneP2Dl0CLb+d4\u002fYOXQItv53j9g5dAi2\u002fneP2Dl0CLb+d4\u002fYOXQItv53j9g5dAi2\u002fneP2Dl0CLb+d4\u002fYOXQItv53j9g5dAi2\u002fneP2Dl0CLb+d4\u002frBxaZDvf6z8j2\u002fl+arzqP+kmMQisHOI\u002f"},"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermap":[{"type":"scattermap","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"x"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"forced_acc"}},"legend":{"title":{"text":"pair_type"},"tracegroupgap":0},"title":{"text":"Forced-choice accuracy from readout projection (per layer)"}},                        {"responsive": true}                    )                };            </script> </div> <p><strong>Findings</strong>:</p> <div> <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script> <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.1.0.min.js" integrity="sha256-Ei4740bWZhaUTQuD6q9yQlgVCMPBz6CZWhevDYPv93A=" crossorigin="anonymous"></script> <div id="547813ae-b711-476b-9ec7-665268dc7735" class="plotly-graph-div" style="height:100%; width:100%;"></div> <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("547813ae-b711-476b-9ec7-665268dc7735")) {                    Plotly.newPlot(                        "547813ae-b711-476b-9ec7-665268dc7735",                        [{"hovertemplate":"pair_type=decimals_diff_len\u003cbr\u003ex=%{x}\u003cbr\u003emean_logit_gap=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"decimals_diff_len","line":{"color":"#636efa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"decimals_diff_len","orientation":"v","showlegend":true,"x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"AAAAwAsVQsCmm8RAq5czwJqZmZFyYSTAj8L1KFCyuT9kO9\u002fvEGQPQN9Pjcf5Dx5AI9v5fvrDF0AdWmRDac4VQOOlmzyhYhFA2c7323HDG0CamZmJ2n4VQFyPwn3teg1AYhBYSS6rD0BYObRAgqUgQJMYBA60HSBAke18Z1NgIkB1kxh8QCAjQFCNlx4gcSdAsHJouXN\u002fJ0CuR+HSLrcwQMuhRT7VAzpA9ihcV\u002fVxOUBMN4kFB0oyQGIQWEG0HCxAAiuHTpAI8T8rhxaROcTwPwisHO4O0ABA"},"yaxis":"y","type":"scatter"},{"hovertemplate":"pair_type=decimals_equal_len\u003cbr\u003ex=%{x}\u003cbr\u003emean_logit_gap=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"decimals_equal_len","line":{"color":"#EF553B","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"decimals_equal_len","orientation":"v","showlegend":true,"x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"AAAAwAsVQsAbL92MYKMzwEoMAjtUaSTAVg4tsvWHwT\u002fTTWJIEKgOQNv5fkI0\u002fR1Asp3vDwOlF0AfhethQhUWQE5iENTAhxFAH4XrIY\u002fJG0DVeOn2ikAVQESLbC\u002fMpQ1AiUFg2U4CEUAUrkcpbAghQEa28wmEqCBAHVpkkw7EIkDpJjHIefIiQFCNl15rGShAMzMzQyMxKEBaZDu3FA4xQO58P1VE6TtAgZVD+5UsO0CTGARm234zQEjhetSACy5AiUFgPWhB+D83iUGYikL5P23n+13RewJA"},"yaxis":"y","type":"scatter"},{"hovertemplate":"pair_type=integers_diff_len\u003cbr\u003ex=%{x}\u003cbr\u003emean_logit_gap=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"integers_diff_len","line":{"color":"#00cc96","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"integers_diff_len","orientation":"v","showlegend":true,"x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"AAAAwAsVQsBeukls73gzwB1aZCNTOSTAtvP9lLV51T9iEFgxuxAPQAAAAPADGR5AJQaBXdX3GECsHFr8zF0VQGQ730snMBBAMzMz278lG0AMAiu3gegUQDMzM4NPXAdAvHSTsPtsB0C4HoU7oisbQFg5tFDnQxxApHA9Ck5yH0CiRbZrB4IiQJ7vp\u002f6NdChAObTINuclJ0AEVg4RwIQwQJhuEqd9VjhA0SLbQbAIN0DdJAa5bXovQDVeukE8jydAObTIdjUA8r\u002fJdr5viHHkv76fGtdRWPU\u002f"},"yaxis":"y","type":"scatter"},{"hovertemplate":"pair_type=integers_equal_len\u003cbr\u003ex=%{x}\u003cbr\u003emean_logit_gap=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"integers_equal_len","line":{"color":"#ab63fa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"integers_equal_len","orientation":"v","showlegend":true,"x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"AAAAwAsVQsA1XrqZrpEzwN9PjZfrcSTAKVyPQryWzD9U46Wr1XAPQEa281V+1h1Avp8aR3OlGEDByqEdUOIVQJqZmbEqIhBAx0s3eUDyGkCsHFoU4x4UQOf7qZn6VgZAH4XrySuVCUDZzvcr7OQbQM3MzMQ6Gh1A3SQG1ZITIEC6SQyyoGQiQNnO99\u002f\u002fqilAKVyPek94KEAhsHL4dnoxQNEi2\u002fFRITtAnMQgcDawOUCDwMpJHcYxQPCnxiu9TSpATDeJ0Y504r8fhetR58axP+F6FK5cafc\u002f"},"yaxis":"y","type":"scatter"},{"hovertemplate":"pair_type=ALL\u003cbr\u003ex=%{x}\u003cbr\u003emean_logit_gap=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"ALL","line":{"color":"#FFA15A","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines+markers","name":"ALL","orientation":"v","showlegend":true,"x":{"dtype":"i1","bdata":"\u002fwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"AAAAwAsVQsDVeOl0apEzwPhT42GBXSTAzczMTNF6yT8730+FbCMPQAAAABQs\u002fx1ArkfhjJFBGECq8dIv8sgVQEw3iQMtzxBAvHSTVEBpG0BKDAKTsvEUQG8Sg\u002fIANQpAVOOl3XysDEAbL93OGpseQPYoXJGkuh5AN4lB9UY8IUBvEoOYWL4iQEa281aGaihAke18a7PTJ0CLbOekHvEwQAisHEs6WTpAeekmgdxVOUC0yHakDdMxQPT91KBLAStAWDm0WPcezD+oxkszN3XgP2IQWMdb1vw\u002f"},"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermap":[{"type":"scattermap","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"x"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"mean_logit_gap"}},"legend":{"title":{"text":"pair_type"},"tracegroupgap":0},"title":{"text":"Readout gap vs layer using tokens ('Yes', 'No')"}},                        {"responsive": true}                    )                };            </script> </div> <ul> <li>forced-choice accuracy continues to stay random till layer 22, implying the projections on r is random. I expected it to be random for all the cases surprisingly it became very high for Layer 23 and again started decreasing.</li> </ul> <p><strong>Key pattern</strong>:</p> <ol> <li><strong>Layer 0-2</strong> : Decreasing bias shifts from <strong>No -&gt; neutral</strong>.</li> <li><strong>Layer 3-14</strong>: slight <strong>Yes</strong> bias persist.</li> <li><strong>Layer 15-19</strong>: Steep <strong>Yes bias increase</strong>.</li> <li><strong>Layer 20-23</strong>: Bias shifts from <strong>Yes -&gt; neutral</strong>. <strong>forced-choice accuracy peaks at Layer 23</strong></li> <li><strong>Layer 24-25</strong>: Increases slightly towards yes again. <strong>accuracy drops close to random for decimals for Layer 25</strong></li> </ol> <p><strong>Results</strong></p> <ul> <li>This gives us an understanding that unbiased layers have higher accuracy if they also have emergence of class separation. That’s why it peaks at Layer 23 and drops back as bias started to increase again. We see emergence in previous sections and biasness in this section.</li> </ul> <div> <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script> <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.1.0.min.js" integrity="sha256-Ei4740bWZhaUTQuD6q9yQlgVCMPBz6CZWhevDYPv93A=" crossorigin="anonymous"></script> <div id="4e5e9c42-dd78-4f22-a6ae-60f763cd120f" class="plotly-graph-div" style="height:1300px; width:100%;"></div> <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("4e5e9c42-dd78-4f22-a6ae-60f763cd120f")) {                    Plotly.newPlot(                        "4e5e9c42-dd78-4f22-a6ae-60f763cd120f",                        [{"hovertemplate":"component=yes_correct\u003cbr\u003epair_type=decimals_diff_len\u003cbr\u003ex=%{x}\u003cbr\u003erate=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"yes_correct","marker":{"color":"green","pattern":{"shape":""}},"name":"yes_correct","orientation":"v","showlegend":true,"textposition":"auto","x":{"dtype":"i1","bdata":"FxgZ"},"xaxis":"x5","y":{"dtype":"f8","bdata":"\u002ftR46SYx4D\u002f+1HjpJjHgP6jGSzeJQeA\u002f"},"yaxis":"y5","type":"bar"},{"hovertemplate":"component=yes_correct\u003cbr\u003epair_type=decimals_equal_len\u003cbr\u003ex=%{x}\u003cbr\u003erate=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"yes_correct","marker":{"color":"green","pattern":{"shape":""}},"name":"yes_correct","orientation":"v","showlegend":false,"textposition":"auto","x":{"dtype":"i1","bdata":"FxgZ"},"xaxis":"x4","y":{"dtype":"f8","bdata":"aJHtfD813j9oke18PzXeP2iR7Xw\u002fNd4\u002f"},"yaxis":"y4","type":"bar"},{"hovertemplate":"component=yes_correct\u003cbr\u003epair_type=integers_diff_len\u003cbr\u003ex=%{x}\u003cbr\u003erate=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"yes_correct","marker":{"color":"green","pattern":{"shape":""}},"name":"yes_correct","orientation":"v","showlegend":false,"textposition":"auto","x":{"dtype":"i1","bdata":"FxgZ"},"xaxis":"x3","y":{"dtype":"f8","bdata":"DAIrhxbZ3j9kO99PjZfeP1yPwvUoXN8\u002f"},"yaxis":"y3","type":"bar"},{"hovertemplate":"component=yes_correct\u003cbr\u003epair_type=integers_equal_len\u003cbr\u003ex=%{x}\u003cbr\u003erate=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"yes_correct","marker":{"color":"green","pattern":{"shape":""}},"name":"yes_correct","orientation":"v","showlegend":false,"textposition":"auto","x":{"dtype":"i1","bdata":"FxgZ"},"xaxis":"x2","y":{"dtype":"f8","bdata":"GQRWDi2y3T8ZBFYOLbLdP23n+6nx0t0\u002f"},"yaxis":"y2","type":"bar"},{"hovertemplate":"component=yes_correct\u003cbr\u003epair_type=ALL\u003cbr\u003ex=%{x}\u003cbr\u003erate=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"yes_correct","marker":{"color":"green","pattern":{"shape":""}},"name":"yes_correct","orientation":"v","showlegend":false,"textposition":"auto","x":{"dtype":"i1","bdata":"FxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"YhBYObTI3j+4HoXrUbjeP2Dl0CLb+d4\u002f"},"yaxis":"y","type":"bar"},{"hovertemplate":"component=yes_incorrect\u003cbr\u003epair_type=decimals_diff_len\u003cbr\u003ex=%{x}\u003cbr\u003erate=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"yes_incorrect","marker":{"color":"lightgreen","pattern":{"shape":""}},"name":"yes_incorrect","orientation":"v","showlegend":true,"textposition":"auto","x":{"dtype":"i1","bdata":"FxgZ"},"xaxis":"x5","y":{"dtype":"f8","bdata":"\u002fKnx0k1iYD\u002f8qfHSTWJgPwAAAAAAAAAA"},"yaxis":"y5","type":"bar"},{"hovertemplate":"component=yes_incorrect\u003cbr\u003epair_type=decimals_equal_len\u003cbr\u003ex=%{x}\u003cbr\u003erate=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"yes_incorrect","marker":{"color":"lightgreen","pattern":{"shape":""}},"name":"yes_incorrect","orientation":"v","showlegend":false,"textposition":"auto","x":{"dtype":"i1","bdata":"FxgZ"},"xaxis":"x4","y":{"dtype":"f8","bdata":"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"},"yaxis":"y4","type":"bar"},{"hovertemplate":"component=yes_incorrect\u003cbr\u003epair_type=integers_diff_len\u003cbr\u003ex=%{x}\u003cbr\u003erate=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"yes_incorrect","marker":{"color":"lightgreen","pattern":{"shape":""}},"name":"yes_incorrect","orientation":"v","showlegend":false,"textposition":"auto","x":{"dtype":"i1","bdata":"FxgZ"},"xaxis":"x3","y":{"dtype":"f8","bdata":"\u002fKnx0k1igD\u002f6fmq8dJOIPwAAAAAAAAAA"},"yaxis":"y3","type":"bar"},{"hovertemplate":"component=yes_incorrect\u003cbr\u003epair_type=integers_equal_len\u003cbr\u003ex=%{x}\u003cbr\u003erate=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"yes_incorrect","marker":{"color":"lightgreen","pattern":{"shape":""}},"name":"yes_incorrect","orientation":"v","showlegend":false,"textposition":"auto","x":{"dtype":"i1","bdata":"FxgZ"},"xaxis":"x2","y":{"dtype":"f8","bdata":"\u002fKnx0k1iYD\u002f8qfHSTWJgPwAAAAAAAAAA"},"yaxis":"y2","type":"bar"},{"hovertemplate":"component=yes_incorrect\u003cbr\u003epair_type=ALL\u003cbr\u003ex=%{x}\u003cbr\u003erate=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"yes_incorrect","marker":{"color":"lightgreen","pattern":{"shape":""}},"name":"yes_incorrect","orientation":"v","showlegend":false,"textposition":"auto","x":{"dtype":"i1","bdata":"FxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"+n5qvHSTaD\u002f8qfHSTWJwPwAAAAAAAAAA"},"yaxis":"y","type":"bar"},{"hovertemplate":"component=no_correct\u003cbr\u003epair_type=decimals_diff_len\u003cbr\u003ex=%{x}\u003cbr\u003erate=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"no_correct","marker":{"color":"blue","pattern":{"shape":""}},"name":"no_correct","orientation":"v","showlegend":true,"textposition":"auto","x":{"dtype":"i1","bdata":"FxgZ"},"xaxis":"x5","y":{"dtype":"f8","bdata":"16NwPQrX0z\u002fsUbgehevRP\u002fyp8dJNYoA\u002f"},"yaxis":"y5","type":"bar"},{"hovertemplate":"component=no_correct\u003cbr\u003epair_type=decimals_equal_len\u003cbr\u003ex=%{x}\u003cbr\u003erate=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"no_correct","marker":{"color":"blue","pattern":{"shape":""}},"name":"no_correct","orientation":"v","showlegend":false,"textposition":"auto","x":{"dtype":"i1","bdata":"FxgZ"},"xaxis":"x4","y":{"dtype":"f8","bdata":"aJHtfD81zj\u002fb+X5qvHTDP\u002fyp8dJNYnA\u002f"},"yaxis":"y4","type":"bar"},{"hovertemplate":"component=no_correct\u003cbr\u003epair_type=integers_diff_len\u003cbr\u003ex=%{x}\u003cbr\u003erate=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"no_correct","marker":{"color":"blue","pattern":{"shape":""}},"name":"no_correct","orientation":"v","showlegend":false,"textposition":"auto","x":{"dtype":"i1","bdata":"FxgZ"},"xaxis":"x3","y":{"dtype":"f8","bdata":"DAIrhxbZ3j\u002fFILByaJHdP9NNYhBYOcQ\u002f"},"yaxis":"y3","type":"bar"},{"hovertemplate":"component=no_correct\u003cbr\u003epair_type=integers_equal_len\u003cbr\u003ex=%{x}\u003cbr\u003erate=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"no_correct","marker":{"color":"blue","pattern":{"shape":""}},"name":"no_correct","orientation":"v","showlegend":false,"textposition":"auto","x":{"dtype":"i1","bdata":"FxgZ"},"xaxis":"x2","y":{"dtype":"f8","bdata":"oBov3SQG4T9MN4lBYOXgP9NNYhBYOcQ\u002f"},"yaxis":"y2","type":"bar"},{"hovertemplate":"component=no_correct\u003cbr\u003epair_type=ALL\u003cbr\u003ex=%{x}\u003cbr\u003erate=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"no_correct","marker":{"color":"blue","pattern":{"shape":""}},"name":"no_correct","orientation":"v","showlegend":false,"textposition":"auto","x":{"dtype":"i1","bdata":"FxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"9ihcj8L12D+Nl24Sg8DWP8uhRbbz\u002fbQ\u002f"},"yaxis":"y","type":"bar"},{"hovertemplate":"component=no_incorrect\u003cbr\u003epair_type=decimals_diff_len\u003cbr\u003ex=%{x}\u003cbr\u003erate=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"no_incorrect","marker":{"color":"lightblue","pattern":{"shape":""}},"name":"no_incorrect","orientation":"v","showlegend":true,"textposition":"auto","x":{"dtype":"i1","bdata":"FxgZ"},"xaxis":"x5","y":{"dtype":"f8","bdata":"sp3vp8ZLxz+JQWDl0CLLP2Dl0CLb+d4\u002f"},"yaxis":"y5","type":"bar"},{"hovertemplate":"component=no_incorrect\u003cbr\u003epair_type=decimals_equal_len\u003cbr\u003ex=%{x}\u003cbr\u003erate=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"no_incorrect","marker":{"color":"lightblue","pattern":{"shape":""}},"name":"no_incorrect","orientation":"v","showlegend":false,"textposition":"auto","x":{"dtype":"i1","bdata":"FxgZ"},"xaxis":"x4","y":{"dtype":"f8","bdata":"46WbxCCw0j+q8dJNYhDYP\u002fhT46WbxOA\u002f"},"yaxis":"y4","type":"bar"},{"hovertemplate":"component=no_incorrect\u003cbr\u003epair_type=integers_diff_len\u003cbr\u003ex=%{x}\u003cbr\u003erate=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"no_incorrect","marker":{"color":"lightblue","pattern":{"shape":""}},"name":"no_incorrect","orientation":"v","showlegend":false,"textposition":"auto","x":{"dtype":"i1","bdata":"FxgZ"},"xaxis":"x3","y":{"dtype":"f8","bdata":"eekmMQisnD\u002f6fmq8dJOoP7pJDAIrh9Y\u002f"},"yaxis":"y3","type":"bar"},{"hovertemplate":"component=no_incorrect\u003cbr\u003epair_type=integers_equal_len\u003cbr\u003ex=%{x}\u003cbr\u003erate=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"no_incorrect","marker":{"color":"lightblue","pattern":{"shape":""}},"name":"no_incorrect","orientation":"v","showlegend":false,"textposition":"auto","x":{"dtype":"i1","bdata":"FxgZ"},"xaxis":"x2","y":{"dtype":"f8","bdata":"\u002fKnx0k1iYD\u002f6fmq8dJN4P6rx0k1iENg\u002f"},"yaxis":"y2","type":"bar"},{"hovertemplate":"component=no_incorrect\u003cbr\u003epair_type=ALL\u003cbr\u003ex=%{x}\u003cbr\u003erate=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"no_incorrect","marker":{"color":"lightblue","pattern":{"shape":""}},"name":"no_incorrect","orientation":"v","showlegend":false,"textposition":"auto","x":{"dtype":"i1","bdata":"FxgZ"},"xaxis":"x","y":{"dtype":"f8","bdata":"VOOlm8QgwD8lBoGVQ4vEPy2yne+nxts\u002f"},"yaxis":"y","type":"bar"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermap":[{"type":"scattermap","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,0.98],"title":{"text":"x"}},"yaxis":{"anchor":"x","domain":[0.0,0.17600000000000002],"title":{"text":"proportion"},"range":[0,1]},"xaxis2":{"anchor":"y2","domain":[0.0,0.98],"matches":"x","showticklabels":false},"yaxis2":{"anchor":"x2","domain":[0.20600000000000002,0.382],"title":{"text":"proportion"},"range":[0,1]},"xaxis3":{"anchor":"y3","domain":[0.0,0.98],"matches":"x","showticklabels":false},"yaxis3":{"anchor":"x3","domain":[0.41200000000000003,0.5880000000000001],"title":{"text":"proportion"},"range":[0,1]},"xaxis4":{"anchor":"y4","domain":[0.0,0.98],"matches":"x","showticklabels":false},"yaxis4":{"anchor":"x4","domain":[0.618,0.794],"title":{"text":"proportion"},"range":[0,1]},"xaxis5":{"anchor":"y5","domain":[0.0,0.98],"matches":"x","showticklabels":false},"yaxis5":{"anchor":"x5","domain":[0.8240000000000001,1.0],"title":{"text":"proportion"},"range":[0,1]},"annotations":[{"font":{},"showarrow":false,"text":"ALL","textangle":90,"x":0.98,"xanchor":"left","xref":"paper","y":0.08800000000000001,"yanchor":"middle","yref":"paper"},{"font":{},"showarrow":false,"text":"integers_equal_len","textangle":90,"x":0.98,"xanchor":"left","xref":"paper","y":0.29400000000000004,"yanchor":"middle","yref":"paper"},{"font":{},"showarrow":false,"text":"integers_diff_len","textangle":90,"x":0.98,"xanchor":"left","xref":"paper","y":0.5,"yanchor":"middle","yref":"paper"},{"font":{},"showarrow":false,"text":"decimals_equal_len","textangle":90,"x":0.98,"xanchor":"left","xref":"paper","y":0.706,"yanchor":"middle","yref":"paper"},{"font":{},"showarrow":false,"text":"decimals_diff_len","textangle":90,"x":0.98,"xanchor":"left","xref":"paper","y":0.912,"yanchor":"middle","yref":"paper"}],"legend":{"title":{"text":"component"},"tracegroupgap":0},"title":{"text":"Composition at final layers (L-2, L-1, L=25)"},"barmode":"stack","height":1300},                        {"responsive": true}                    )                };            </script> </div> <p>The plot shows clear indication of bias towards Yes and performance degrading from Layer 23 to Layer 25 in all 4 numeric datasets.</p> <hr/> <h2 id="5-part-iii--causal-edits-patching--ablations">5. Part III — Causal Edits (Patching &amp; Ablations)</h2> <h3 id="51-transformerlens-activation-patching">5.1 TransformerLens activation patching</h3> <p><strong>Goal</strong>: Identify which sub-component corrupts the decision when moving from L24→L25.</p> <p><strong>Methodology</strong> Patch <strong>L25</strong> activations with <strong>L24</strong> for hooks <code class="language-plaintext highlighter-rouge">resid_post</code>, <code class="language-plaintext highlighter-rouge">mlp_post</code>, <code class="language-plaintext highlighter-rouge">resid_pre</code>, <code class="language-plaintext highlighter-rouge">resid_mid</code>, <code class="language-plaintext highlighter-rouge">attn_out</code>. It will help to isolate the source of the error.</p> <div> <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script> <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.1.0.min.js" integrity="sha256-Ei4740bWZhaUTQuD6q9yQlgVCMPBz6CZWhevDYPv93A=" crossorigin="anonymous"></script> <div id="329c2747-2b7d-4d48-a24f-92d25d6c2263" class="plotly-graph-div" style="height:100%; width:100%;"></div> <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("329c2747-2b7d-4d48-a24f-92d25d6c2263")) {                    Plotly.newPlot(                        "329c2747-2b7d-4d48-a24f-92d25d6c2263",                        [{"name":"Before","text":{"dtype":"f8","bdata":"ZmZmZmbmTEBmZmZmZuZMQGZmZmZm5kxAZmZmZmbmTEBmZmZmZuZMQA=="},"textposition":"outside","x":["attn_out","resid_mid","resid_post","resid_pre","mlp_post"],"y":{"dtype":"f8","bdata":"exSuR+F64j97FK5H4XriP3sUrkfheuI\u002fexSuR+F64j97FK5H4XriPw=="},"type":"bar"},{"name":"After","text":{"dtype":"f8","bdata":"ZmZmZmYmSkDNzMzMzExIQM3MzMzM7FFAMzMzMzMzSkAAAAAAAKBSQA=="},"textposition":"outside","x":["attn_out","resid_mid","resid_post","resid_pre","mlp_post"],"y":{"dtype":"f8","bdata":"I9v5fmq84D\u002ffT42XbhLfP4ts5\u002fup8eY\u002fYhBYObTI4D\u002fXo3A9CtfnPw=="},"type":"bar"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermap":[{"type":"scattermap","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"yaxis":{"title":{"text":"Accuracy"},"range":[0,1]},"uniformtext":{"minsize":8,"mode":"hide"},"title":{"text":"Accuracy before vs after (L-1 \u2192 L) across hooks"},"barmode":"group","xaxis":{"title":{"text":"hook_name"}},"legend":{"title":{"text":"Condition"}}},                        {"responsive": true}                    )                };            </script> </div> <p><strong>Findings</strong>:</p> <ul> <li><strong>Patching <code class="language-plaintext highlighter-rouge">resid_post</code> / <code class="language-plaintext highlighter-rouge">mlp_post</code> from L24 → L25 <em>improves</em> accuracy</strong>.</li> <li>Patching others often <strong>hurts</strong>.</li> <li>Interestingly the <code class="language-plaintext highlighter-rouge">mean_delta_gap</code> very slightly changed for which the accuracy improved but for which accuracy decreased more biasness added towards positive side. I believe that both Yes and No confidence increased equally when accuracy increased and hence mean remained close to zero.</li> <li><strong>Result</strong> Patching the output of the MLP sub-block (resid_post, mlp_post) reliably improves accuracy. This causally implicates the final MLP layer as the primary source of corruption.</li> </ul> <p><img src="/assets/debug-num-llms/hook_patched_accuracy.jpg" alt="text"/></p> <h3 id="52-harmful-neuron-discovery--ablation">5.2 Harmful-neuron discovery &amp; ablation</h3> <p><strong>Goal</strong>: To find the minimal set of specific neurons responsible for the model’s biased failures and causally verify their impact by disabling them.</p> <p><strong>Methodology</strong>:</p> <ol> <li> <p>Discovery: First, I identified the most “harmful” neurons by scoring their negative impact on accuracy across the entire dataset. Neurons were ranked based on a gradient-based method that measures how much their activation contributes to pushing the final decision in the wrong direction (see <a href="#appendix-c">Appendix C</a> for the mathematical details).</p> </li> <li> <p>Verification: To ensure these findings weren’t just an artifact of overfitting to the test data, I repeated the experiment with a formal train/validation split. The harmful neurons were identified using only the training data, and then ablated to measure the performance change on the held-out validation data.</p> </li> </ol> <p>Score neurons by their negative impact on accuracy (per dataset and globally). . Note that here we are using the full data as training and prediction with no splits. Next section deals with train and validation splits, the results remain similar. <a href="#appendix-c">Appendix C</a>. describes the mathematical intuition.</p> <p>h_j element_wise_multiplication (W_out[j] · g) where g is gradient of dot product of projection of layer norm and Yes/No direction with respect to r_post, and W_out is the weight element of j_{th} neuron and h_j is the activation value of the neuron.<br/> We then align this with truth_yn predictions (+1 if Yes else -1)</p> <p>Which lets us ask the question that whether the neuron is helpful for the class. Positive = helpful, negative = harmful</p> <div> <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script> <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.1.0.min.js" integrity="sha256-Ei4740bWZhaUTQuD6q9yQlgVCMPBz6CZWhevDYPv93A=" crossorigin="anonymous"></script> <div id="9461aa88-c1d4-4e2d-8380-5f16bf931e05" class="plotly-graph-div" style="height:100%; width:100%;"></div> <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("9461aa88-c1d4-4e2d-8380-5f16bf931e05")) {                    Plotly.newPlot(                        "9461aa88-c1d4-4e2d-8380-5f16bf931e05",                        [{"alignmentgroup":"True","hovertemplate":"Condition=Baseline\u003cbr\u003eslice=%{x}\u003cbr\u003eAccuracy=%{text}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"Baseline","marker":{"color":"#636efa","pattern":{"shape":""}},"name":"Baseline","offsetgroup":"Baseline","orientation":"v","showlegend":true,"text":{"dtype":"f8","bdata":"5dAi2\u002fl+4j+kcD0K16PgPxBYObTIdt4\u002fDi2yne+n5j8xCKwcWmTjPw=="},"textposition":"outside","x":["OVERALL","decimals_diff_len","decimals_equal_len","integers_diff_len","integers_equal_len"],"xaxis":"x","y":{"dtype":"f8","bdata":"5dAi2\u002fl+4j+kcD0K16PgPxBYObTIdt4\u002fDi2yne+n5j8xCKwcWmTjPw=="},"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"Condition=Ablate culprits\u003cbr\u003eslice=%{x}\u003cbr\u003eAccuracy=%{text}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"Ablate culprits","marker":{"color":"#EF553B","pattern":{"shape":""}},"name":"Ablate culprits","offsetgroup":"Ablate culprits","orientation":"v","showlegend":true,"text":{"dtype":"f8","bdata":"LbKd76fG6z89CtejcD3qP7x0kxgEVuY\u002fuB6F61G47j8CK4cW2c7vPw=="},"textposition":"outside","x":["OVERALL","decimals_diff_len","decimals_equal_len","integers_diff_len","integers_equal_len"],"xaxis":"x","y":{"dtype":"f8","bdata":"LbKd76fG6z89CtejcD3qP7x0kxgEVuY\u002fuB6F61G47j8CK4cW2c7vPw=="},"yaxis":"y","type":"bar"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermap":[{"type":"scattermap","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"slice"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"Accuracy"}},"legend":{"title":{"text":"Condition"},"tracegroupgap":0},"title":{"text":"Accuracy by slice: Baseline vs Ablate culprits [50 neurons ablated from mlp layer]"},"barmode":"group"},                        {"responsive": true}                    )                };            </script> </div> <div> <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script> <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.1.0.min.js" integrity="sha256-Ei4740bWZhaUTQuD6q9yQlgVCMPBz6CZWhevDYPv93A=" crossorigin="anonymous"></script> <div id="94c0ab22-db83-4ec0-8bcd-89707144d298" class="plotly-graph-div" style="height:100%; width:100%;"></div> <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("94c0ab22-db83-4ec0-8bcd-89707144d298")) {                    Plotly.newPlot(                        "94c0ab22-db83-4ec0-8bcd-89707144d298",                        [{"hovertemplate":"slice=%{x}\u003cbr\u003eDelta=%{marker.color}\u003cbr\u003etext=%{text}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"","marker":{"color":{"dtype":"f8","bdata":"kML1KFyP0j8yMzMzMzPTP9Ai2\u002fl+asw\u002fVOOlm8Qg0D+iRbbz\u002fdTYPw=="},"coloraxis":"coloraxis","pattern":{"shape":""}},"name":"","orientation":"v","showlegend":false,"text":{"dtype":"f8","bdata":"j8L1KFyP0j8zMzMzMzPTP9Ei2\u002fl+asw\u002fVOOlm8Qg0D+iRbbz\u002fdTYPw=="},"textposition":"outside","x":["OVERALL","decimals_diff_len","decimals_equal_len","integers_diff_len","integers_equal_len"],"xaxis":"x","y":{"dtype":"f8","bdata":"kML1KFyP0j8yMzMzMzPTP9Ai2\u002fl+asw\u002fVOOlm8Qg0D+iRbbz\u002fdTYPw=="},"yaxis":"y","type":"bar"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermap":[{"type":"scattermap","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"slice"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"Delta"}},"coloraxis":{"colorbar":{"title":{"text":"Delta"}},"colorscale":[[0.0,"rgb(103,0,31)"],[0.1,"rgb(178,24,43)"],[0.2,"rgb(214,96,77)"],[0.3,"rgb(244,165,130)"],[0.4,"rgb(253,219,199)"],[0.5,"rgb(247,247,247)"],[0.6,"rgb(209,229,240)"],[0.7,"rgb(146,197,222)"],[0.8,"rgb(67,147,195)"],[0.9,"rgb(33,102,172)"],[1.0,"rgb(5,48,97)"]],"cmid":0},"legend":{"tracegroupgap":0},"title":{"text":"\u0394 Accuracy (Ablate \u2212 Baseline) by slice (50 neurons from mlp layer)"},"barmode":"relative","shapes":[{"line":{"dash":"dot"},"type":"line","x0":0,"x1":1,"xref":"x domain","y0":0,"y1":0,"yref":"y"}]},                        {"responsive": true}                    )                };            </script> </div> <p><strong>Findings</strong> Ablating just the top 50 globally harmful neurons (out of <strong>Total neurons = 9216</strong>) significantly improved the model’s accuracy.</p> <ul> <li>Even after having more intersection of ablated neurons the least improvement is observed in decimal_equal_len.</li> <li><strong>Large gains</strong> for <strong>integers_equal_len</strong> and <strong>decimals_diff_len</strong> after ablation.</li> <li>surprisingly <strong>decimals_equal_len</strong> which can be compared as <strong>integers_equal_len</strong> for methodology of comparing as decimal has no effect when comparing.</li> <li>Even after ablation in <strong>decimals_diff_len</strong>, when truth is <strong>No</strong> and decimal part of the first number is <strong>greater in length</strong>, vs when decimal part of the first number is <strong>smaller in length</strong> it’s easier for model to predict when length is smaller vs length is greater which gives an indication that the model does take length of the values into account also.</li> </ul> <p><img src="/assets/debug-num-llms/ct_diff_pair_type_truth_len_ablation.jpg" alt="alt text"/></p> <p><strong>Verification Findings</strong><br/> Results are not very different from the previous approach with similar trends.</p> <div> <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script> <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.1.0.min.js" integrity="sha256-Ei4740bWZhaUTQuD6q9yQlgVCMPBz6CZWhevDYPv93A=" crossorigin="anonymous"></script> <div id="578f7ec2-9d56-49a9-b396-687ed65d5e7d" class="plotly-graph-div" style="height:100%; width:100%;"></div> <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("578f7ec2-9d56-49a9-b396-687ed65d5e7d")) {                    Plotly.newPlot(                        "578f7ec2-9d56-49a9-b396-687ed65d5e7d",                        [{"alignmentgroup":"True","error_y":{"array":{"dtype":"f8","bdata":"AAAAAAAA+H8AAAAAAAD4fwAAAAAAAPh\u002fAAAAAAAA+H8="}},"hovertemplate":"condition=abl_harmful_top50\u003cbr\u003epair_type=%{x}\u003cbr\u003eAccuracy (%)=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"abl_harmful_top50","marker":{"color":"#636efa","pattern":{"shape":""}},"name":"abl_harmful_top50","offsetgroup":"abl_harmful_top50","orientation":"v","showlegend":true,"textposition":"auto","x":["decimals_diff_len","decimals_equal_len","integers_diff_len","integers_equal_len"],"xaxis":"x","y":{"dtype":"f8","bdata":"IIPzMTgfVEDiyw0xIB1SQL+Iap19EVhA\u002fWbr0G+2WEA="},"yaxis":"y","type":"bar"},{"alignmentgroup":"True","error_y":{"array":{"dtype":"f8","bdata":"AAAAAAAA+H8AAAAAAAD4fwAAAAAAAPh\u002fAAAAAAAA+H8="}},"hovertemplate":"condition=abl_random_top50\u003cbr\u003epair_type=%{x}\u003cbr\u003eAccuracy (%)=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"abl_random_top50","marker":{"color":"#EF553B","pattern":{"shape":""}},"name":"abl_random_top50","offsetgroup":"abl_random_top50","orientation":"v","showlegend":true,"textposition":"auto","x":["decimals_diff_len","decimals_equal_len","integers_diff_len","integers_equal_len"],"xaxis":"x","y":{"dtype":"f8","bdata":"Mjgfg\u002fOxSEDmhhiQjqVKQNh4NH+w8VJAHvrN1qHfS0A="},"yaxis":"y","type":"bar"},{"alignmentgroup":"True","error_y":{"array":{"dtype":"f8","bdata":"AAAAAAAA+H8AAAAAAAD4fwAAAAAAAPh\u002fAAAAAAAA+H8="}},"hovertemplate":"condition=baseline\u003cbr\u003epair_type=%{x}\u003cbr\u003eAccuracy (%)=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"baseline","marker":{"color":"#00cc96","pattern":{"shape":""}},"name":"baseline","offsetgroup":"baseline","orientation":"v","showlegend":true,"textposition":"auto","x":["decimals_diff_len","decimals_equal_len","integers_diff_len","integers_equal_len"],"xaxis":"x","y":{"dtype":"f8","bdata":"Mjgfg\u002fOxSEDmhhiQjqVKQLgM+ORwGVNAJCz3NMJyTEA="},"yaxis":"y","type":"bar"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermap":[{"type":"scattermap","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"pair_type"},"tickangle":-20},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"Accuracy (%)"},"range":[0,100]},"legend":{"title":{"text":"Condition"},"tracegroupgap":0},"title":{"text":"K-fold: Accuracy by pair_type and condition (mean \u00b1 sd)"},"barmode":"group"},                        {"responsive": true}                    )                };            </script> </div> <div> <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script> <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.1.0.min.js" integrity="sha256-Ei4740bWZhaUTQuD6q9yQlgVCMPBz6CZWhevDYPv93A=" crossorigin="anonymous"></script> <div id="8175c130-4de7-4223-a52a-5e40b7c85b51" class="plotly-graph-div" style="height:100%; width:100%;"></div> <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("8175c130-4de7-4223-a52a-5e40b7c85b51")) {                    Plotly.newPlot(                        "8175c130-4de7-4223-a52a-5e40b7c85b51",                        [{"error_y":{"array":{"dtype":"f8","bdata":"AAAAAAAA+H8AAAAAAAD4fwAAAAAAAPh\u002fAAAAAAAA+H8="},"type":"data","visible":true},"marker":{"cmid":0,"colorscale":[[0.0,"rgb(103,0,31)"],[0.1,"rgb(178,24,43)"],[0.2,"rgb(214,96,77)"],[0.3,"rgb(244,165,130)"],[0.4,"rgb(253,219,199)"],[0.5,"rgb(247,247,247)"],[0.6,"rgb(209,229,240)"],[0.7,"rgb(146,197,222)"],[0.8,"rgb(67,147,195)"],[0.9,"rgb(33,102,172)"],[1.0,"rgb(5,48,97)"]]},"name":"\u0394 acc (pp)","text":{"dtype":"f8","bdata":"mpmZmZkZP0ApXI\u002fC9SgzQOF6FK5H4TNAmpmZmZn5REA="},"textposition":"outside","x":["decimals_diff_len \u2022 abl_harmful_top50","decimals_equal_len \u2022 abl_harmful_top50","integers_diff_len \u2022 abl_harmful_top50","integers_equal_len \u2022 abl_harmful_top50"],"y":{"dtype":"f8","bdata":"GpyPwfkYP0C7IQakYykzQBvwyeEy4DNA16HfbB36REA="},"type":"bar"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermap":[{"type":"scattermap","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"yaxis":{"title":{"text":"\u0394 Accuracy (pp)"},"range":[-54.54022988505748,54.54022988505748]},"xaxis":{"title":{"text":"pair_type \u2022 condition"},"tickangle":-20},"title":{"text":"K-fold: \u0394 Accuracy (pp) vs baseline by pair_type (mean \u00b1 sd)"},"shapes":[{"line":{"dash":"dot"},"type":"line","x0":0,"x1":1,"xref":"x domain","y0":0,"y1":0,"yref":"y"}]},                        {"responsive": true}                    )                };            </script> </div> <div> <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script> <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.1.0.min.js" integrity="sha256-Ei4740bWZhaUTQuD6q9yQlgVCMPBz6CZWhevDYPv93A=" crossorigin="anonymous"></script> <div id="0b3673a6-3f41-4679-a55e-3455fd78edcf" class="plotly-graph-div" style="height:100%; width:100%;"></div> <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("0b3673a6-3f41-4679-a55e-3455fd78edcf")) {                    Plotly.newPlot(                        "0b3673a6-3f41-4679-a55e-3455fd78edcf",                        [{"coloraxis":"coloraxis","name":"0","texttemplate":"%{z:.3f}","x":["abl_harmful_top50"],"y":["decimals_diff_len","decimals_equal_len","integers_diff_len","integers_equal_len"],"z":{"dtype":"f8","bdata":"diVqV6IiAcDWbJ+oHnT9v+Iy4JPD1QXA+s3Wod8+BcA=","shape":"4, 1"},"type":"heatmap","xaxis":"x","yaxis":"y","hovertemplate":"condition: %{x}\u003cbr\u003epair_type: %{y}\u003cbr\u003e\u0394 margin: %{z}\u003cextra\u003e\u003c\u002fextra\u003e"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermap":[{"type":"scattermap","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Condition (vs baseline)"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"autorange":"reversed","title":{"text":"pair_type"}},"coloraxis":{"colorbar":{"title":{"text":"\u0394 margin"}},"colorscale":[[0.0,"rgb(103,0,31)"],[0.1,"rgb(178,24,43)"],[0.2,"rgb(214,96,77)"],[0.3,"rgb(244,165,130)"],[0.4,"rgb(253,219,199)"],[0.5,"rgb(247,247,247)"],[0.6,"rgb(209,229,240)"],[0.7,"rgb(146,197,222)"],[0.8,"rgb(67,147,195)"],[0.9,"rgb(33,102,172)"],[1.0,"rgb(5,48,97)"]],"cmid":0},"title":{"text":"K-fold: \u0394 Mean Margin vs baseline by pair_type \u00d7 condition"}},                        {"responsive": true}                    )                };            </script> </div> <h2 id="6-limitations--possible-next-steps">6. Limitations &amp; Possible Next steps:</h2> <ul> <li>(a) <strong>Prompt diversity</strong> : Have analysed a single prompt. Can try for different types of prompts.</li> <li>(b) <strong>String Analysis</strong> : More exploration needed why strings were biased towards <em>No</em>.</li> <li>(c) Tokenization was not deeply analysed. Only observation was that every number and comparator operator was getting tokenized individually.</li> <li>(d) Didn’t try <strong>PCA post ablation</strong> to see how the geometry changes.</li> <li>(e) Work currently analyse only one model <strong>Gemma-2-2b-it</strong>. And also only instruction tuned model. A good study could have been how the last layer of non instruction tuned behaved vs the instruction tuned.</li> <li>(f) Doesn’t analyse negative numbers in comparison.</li> </ul> <h2 id="appendix">Appendix</h2> <h3 id="a-harmful-neurons">A. Harmful neurons</h3> <h4 id="top-50-global-harmful-neurons">Top 50 global harmful neurons</h4> <p>Global Top 50 harmful neurons: [ 406, 7592, 2045, 7026, 7986, 8945, 8673, 3809, 6040, 341, 6406, 3954, 3667, 4487, 1914, 4673, 530, 7188, 7870, 2177, 7472, 8579, 2482, 496, 2405, 5205, 6743, 6076, 2251, 8510, 3280, 721, 4015, 7248, 9126, 6726, 6968, 5980, 3294, 526, 2363, 8659, 1232, 6534, 3628, 7565, 4482, 6024, 8467, 5637]</p> <h4 id="top-30-harmful-neurons-by-dataset">Top 30 harmful neurons by dataset</h4> <p>Neurons more harmful in decimals_diff_len: [406, 7592, 7026, 2045, 7986, 8945, 8222, 6040, 6743, 6406, 7033, 4361, 341, 3954, 4673, 5637, 8673, 3062, 4482, 2686, 7188, 1494, 2177, 8389, 822, 7184, 3200, 239, 1986, 4331] Neurons more harmful in integer_equal_len: [406, 7592, 2045, 7026, 7986, 8673, 8945, 3809, 4487, 6040, 3667, 3954, 341, 6406, 9022, 7248, 4015, 2076, 7870, 1232, 496, 9126, 481, 5205, 2405, 1914, 6968, 3294, 721, 530] Neurons more harmful in decimal_equal_len: [406, 7592, 7026, 2045, 7986, 3809, 8673, 4487, 341, 3667, 7188, 9022, 8945, 6040, 3954, 4015, 6968, 6406, 4576, 496, 721, 2405, 7248, 9126, 7870, 7472, 3294, 1914, 5205, 8254] Neurons more harmful in integers_diff_len: [406, 7592, 2045, 7026, 7986, 8945, 8673, 530, 3809, 4673, 8579, 1914, 2251, 6406, 5437, 3667, 4504, 9037, 5980, 6076, 8659, 2375, 8510, 4361, 341, 5246, 2177, 6040, 5892, 4283]</p> <p>Interestingly, if we take a intersection of top50 global neurons vs top30 each dataset neurons.</p> <p>Least intersection is with decimals_diff_len = 17 Then Integer_diff_len = 22 then tied integer_equal_len and decimal_equal_len = 27</p> <h3 id="appendix-b">B. What is the Yes–No mean difference?</h3> <p>Let each example i have:</p> <ul> <li>activation vector: h_i (dimension d)</li> <li>label: y_i ∈ {Yes, No}</li> </ul> <p>Class index sets</p> <ul> <li>S_Yes = { i : y_i = Yes }</li> <li>S_No = { i : y_i = No }</li> </ul> <p>Class means</p> <ul> <li> <table> <tbody> <tr> <td>mu_Yes = average of { h_i</td> <td>i ∈ S_Yes }</td> </tr> </tbody> </table> </li> <li> <table> <tbody> <tr> <td>mu_No = average of { h_i</td> <td>i ∈ S_No }</td> </tr> </tbody> </table> </li> </ul> <p>Yes–No mean difference vector</p> <ul> <li>Delta = mu_Yes − mu_No (a vector in ℝ^d)</li> </ul> <p>Unit direction (simple linear probe)</p> <ul> <li> <table> <tbody> <tr> <td>w = Delta /</td> <td> </td> <td>Delta</td> <td> </td> <td>_2 (normalize Delta to length 1)</td> </tr> </tbody> </table> </li> </ul> <p>Signed score of any activation h along this axis</p> <ul> <li>score(h) = dot(h, w) (positive ⇒ evidence for “Yes”, negative ⇒ “No”)</li> </ul> <p>Separation magnitude along the axis</p> <ul> <li> <table> <tbody> <tr> <td>separation =</td> <td>E[score(h)</td> <td>y=Yes] − E[score(h)</td> <td>y=No]</td> </tr> </tbody> </table> </li> </ul> <h3 id="appendix-c">C. Harmful Neuron Finding</h3> <h4 id="how-do-i-rank-the-neurons-from-most-harmful-to-least-harmful">How do I rank the neurons from most harmful to least harmful?</h4> <ul> <li>We focus on the last transformer block post which it goes to ln_head.</li> <li>Residual stream output(after attn + mlp skip connections): <code class="language-plaintext highlighter-rouge">r = resid_post[L-1]</code> (shape: d_model).</li> <li>MLP hidden activations: <code class="language-plaintext highlighter-rouge">h = mlp_post[L-1]</code> (shape: d_mlp).</li> <li>MLP output weight: <code class="language-plaintext highlighter-rouge">W_out</code> (shape: d_mlp × d_model).</li> <li>Readout direction (Yes–No): <code class="language-plaintext highlighter-rouge">Δw = W_U[Yes] - W_U[No]</code>.</li> </ul> <h5 id="logit-gap-margin">Logit Gap (Margin)</h5> <p>The Yes–No margin is:</p> <p>m(r) = &lt;LN(r), Δw&gt;, where LN is the final layer norm.</p> <hr/> <p>We know, Based on taylor expansion of first order m(r + Δr) ~ m(r) + (g^T)*(Δr)</p> <p>We compute the gradient of the margin w.r.t. the residual: g = ∂m / ∂r</p> <p>The MLP update is: r = r_post = r_mid + mlp_post(r_mlp)</p> <p>Since, we only want to check how mlp_neurons are affecting:</p> <p>Δr ~ Δr_mlp Hence, to compute</p> <p>Δr_mlp = h @ W_out = Σ_j (h_j * W_out[j])</p> <p>Contribution of neuron <em>j</em> to the margin: c_j = h_j * (W_out[j] · g)</p> <p>Basically trying out to see, h_j how strongly neuron j is firing and gradient projected weight measures how much the margin cares about the direction that neuron writes. So we only focus on neurons which are affecting neurons most.</p> <p>Next step would be to multiply it by (1 if Yes else -1) to align by truth.</p> <h2 id="references">References</h2> <ul> <li>Nanda, N., &amp; Bloom, J. (2022). <em>TransformerLens</em>. GitHub repository. https://github.com/TransformerLensOrg/TransformerLens</li> <li>Alain, G., &amp; Bengio, Y. (2016). Understanding intermediate layers using linear classifier probes. arXiv:1610.01644. https://arxiv.org/abs/1610.01644</li> </ul> <h2 id="disclaimer">Disclaimer</h2> <p>I only did this research in ~15 hours so there are lot of things unexplored and the quality of work can be significantly improved. Took a lot more time in writing than I expected (probably around 7 hours to refine ) .</p>]]></content><author><name>divyansh singhvi and LLMs</name></author><category term="LLM"/><category term="Mechanistic Interpretability"/><category term="Numeric Reasoning"/><category term="Debugging"/><summary type="html"><![CDATA[Layerwise geometry shows the model internally separates Yes/No, but a last-layer readout corrupts the decision—especially for decimals.]]></summary></entry></feed>